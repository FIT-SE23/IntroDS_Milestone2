%\usepackage[colorlinks=true,linkcolor=blue,citecolor=blue]{hyperref}

% the following is to allow eqnarray to run from one page to another
%\let\endproof\relax
%\let\proof\relax
%\input{macros}

%%% ==== Packages
\usepackage{latexsym}
\usepackage{amsmath}
\usepackage{bm}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{cite}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{tikz,tikz-qtree,tikz-qtree-compat}
\usetikzlibrary{shapes,decorations,arrows,calc,fit}
%\usepackage{fancyheadings}
\usepackage{color,xspace,colortbl}
\usepackage{float}
\usepackage[ruled]{algorithm2e}
\usepackage[noend]{algpseudocode}
\usepackage{enumitem}
\usepackage{balance}
\usepackage{todonotes}
\usepackage{url}
\usepackage{multirow}

\colorlet{LightViolet}{violet!40}
\colorlet{LightRed}{red!40}
\colorlet{LightOrange}{orange!40}
\colorlet{LightGreen}{green!40}
\colorlet{LightBlue}{blue!40}
\colorlet{DarkGreen}{green!50!black}
\colorlet{DarkRed}{red!70!black}
\colorlet{DarkCyan}{red!70!black}
\colorlet{DarkBlue}{blue!80!black}
\definecolor{DarkOrange}{rgb}{1.0, 0.49, 0.0}
\definecolor{Airforceblue}{rgb}{0.36, 0.54, 0.66}
\newcommand{\Note}[1]{{\color{DarkRed} #1}}
\newcommand{\Bigstar}{\mathop{\bigstar}}
\newcommand{\Airforceblue}[1]{{\color{Airforceblue} #1}}
\newcommand{\DarkBlue}[1]{{\color{DarkBlue} #1}}
\newcommand{\LightBlue}[1]{{\color{LightBlue} #1}}
\newcommand{\DarkOrange}[1]{{\color{DarkOrange} #1}}
\newcommand{\LightOrange}[1]{{\color{LightOrange} #1}}
\newcommand{\LightRed}[1]{{\color{LightRed} #1}}
\newcommand{\DarkGreen}[1]{{\color{DarkGreen} #1}}
\newcommand{\Emphasize}[1]{{\color{DarkGreen} #1}}

%%% ==== Misc macros, specific to this paper
\newcommand{\yell}[1]{{\color{red} \textbf{#1}}}
\newcommand{\ayell}[1]{{\color{green} {#1}}}
\newcommand{\hqn}[1]{\todo[inline,color=cyan]{\textsf{#1} \hfill \textsc{--Hung.}}}
\newcommand{\xln}[1]{\todo[inline,color=green]{\textsf{#1} \hfill \textsc{--Long.}}}
\newcommand{\dan}[1]{\todo[inline,color=yellow]{\textsf{#1} \hfill \textsc{--Dan.}}}
\newcommand{\mak}[1]{\todo[inline,color=orange]{\textsf{#1} \hfill \textsc{--Mahmoud.}}}
\newcommand{\nop}[1]{}

\newcommand{\heavy}{\text{\sf heavy}}
\newcommand{\light}{\text{\sf light}}
\newcommand{\fecp}{\text{\sf FECP}}
\newcommand{\poly}{\text{\sf poly}}
\newcommand{\dc}{\text{\sf DC}}
\newcommand{\cc}{\text{\sf CC}}
\newcommand{\fd}{\text{\sf FD}}
\newcommand{\FD}{\text{\sf FD}}
\newcommand{\hdc}{\text{\sf HDC}}
\newcommand{\vietnam}{\text{\sf vietnam}}
\newcommand{\saigon}{\text{\sf saigon}}
\newcommand{\hanoi}{\text{\sf hanoi}}
\newcommand{\germany}{\text{\sf germany}}
\newcommand{\england}{\text{\sf england}}
\newcommand{\usa}{\text{\sf usa}}
\newcommand{\fall}{\text{\sf fall}}
\newcommand{\winter}{\text{\sf winter}}
\newcommand{\incomp}{\perp}
\newcommand{\flow}{{\sf inflow}}

\newcommand{\Assumption}{Conditional query assumption\xspace}
\newcommand{\ProdMar}{Product-marginalization assumption\xspace}
\newcommand{\conQuery}{conditional query\xspace}
\newcommand{\conQueries}{conditional queries\xspace}
\newcommand{\LW}{\mathsf{LW}}
\newcommand{\elf}{\mathsf{ELF}}
\newcommand{\fkagm}{\text{\sc FK-AGM}}
\newcommand{\FKAGM}{\text{{\sf FK-AGM}}}
\newcommand{\LB}{\text{{\sf LogicBlox}}}
\newcommand{\lftj}{\text{{\sf LFTJ}}}
\newcommand{\gj}{\text{{\sf Generic-Join}}}
\newcommand{\faqcs}{\text{\sf FAQ-SS}}
\newcommand{\fdb}{\text{\sf FDB}}
\newcommand{\bcp}{\text{\sf BCP}}
\newcommand{\faq}{\text{\sf FAQ}}
\newcommand{\csma}{\text{\sf CSMA}}
\newcommand{\panda}{\text{\sf PANDA}}
\newcommand{\qfbcq}{\text{\sf QFBCP}}
\newcommand{\twister}{\text{\sf Twister}}
%\newcommand{\cqe}{\text{\sf CQE}}
\newcommand{\parents}{\text{parents}}

%%% ==== Complexity classes
\newcommand{\complexityclass}{\mathbf}
\newcommand{\sharpP}{\#\complexityclass{P}}
\newcommand{\acc}{\complexityclass{ACC}}
\newcommand{\np}{\complexityclass{NP}}
\newcommand{\logspace}{\complexityclass{LOGSPACE}}
\newcommand{\nlogspace}{\complexityclass{NLOGSPACE}}
\newcommand{\pspace}{\complexityclass{PSPACE}}
\newcommand{\fo}{\complexityclass{FO}}
\newcommand{\fpt}{\complexityclass{FPT}}
\newcommand{\wone}{\complexityclass{W}[1]}
\newcommand{\W}{\complexityclass{W}}
\newcommand{\rp}{\complexityclass{RP}}
\newcommand{\corp}{\complexityclass{coRP}}
\newcommand{\p}{\complexityclass{P}}
\newcommand{\nexp}{\complexityclass{NEXP}}
\newcommand{\pcp}{\complexityclass{PCP}}

%%% ==== Function names
\newcommand{\functionname}[1]{\text{\sf #1}}

\newcommand{\Idem}{\functionname{Idem}}
\newcommand{\tw}{\functionname{tw}}
\newcommand{\Ftw}{\functionname{$F$-p-tw}}
\newcommand{\Ffhtw}{\functionname{$F$-p-fhtw}}
\newcommand{\faqw}{\functionname{faqw}}
\newcommand{\Fhtw}{\functionname{$F$-p-htw}}

\newcommand{\FFtw}{\functionname{$F$-free-tw}}
\newcommand{\FFfhtw}{\functionname{$F$-free-fhtw}}
\newcommand{\FFhtw}{\functionname{$F$-free-htw}}

\newcommand{\Lss}{\functionname{$L$-ss}}
\newcommand{\Fss}{\functionname{$F$-ss}}
\newcommand{\htw}{\functionname{htw}}
\newcommand{\fhtw}{\functionname{fhtw}}
\newcommand{\adw}{\functionname{adw}}
\newcommand{\atoms}{\functionname{atoms}}
\newcommand{\dom}{\functionname{Dom}}
\newcommand{\vars}{\functionname{vars}}
\newcommand{\free}{\functionname{free}}
\newcommand{\arity}{\functionname{arity}}
\newcommand{\weight}{\functionname{weight}}
\newcommand{\clr}{\functionname{color}}
\newcommand{\wcoj}{\functionname{WCOJ}}

\newcommand{\true}{\functionname{true}}
\newcommand{\false}{\functionname{false}}
\newcommand{\nan}{\functionname{NaN}}

\newcommand{\InsideOut}{\functionname{InsideOut}}
\newcommand{\basicOI}{\functionname{Recursive-OutsideIn}}
\newcommand{\iterativeOI}{\functionname{Iterative-OutsideIn}}
\newcommand{\OI}{\functionname{OutsideIn}}

\newcommand{\avg}{\functionname{avg}}
\newcommand{\unique}{\functionname{unique}}
\newcommand{\xor}{\functionname{XOR}}

%%% ==== Problem names
\newcommand{\problemname}[1]{\text{\sf #1}}
\newcommand{\mcm}{\problemname{MCM}}
\newcommand{\uniqueclique}{\problemname{Unique-Clique}}
\newcommand{\uniquekclique}{\problemname{Unique-$k$-Clique}}
\newcommand{\sumprod}{\problemname{Sum-Product}}
\newcommand{\maxprod}{\problemname{Max-Product}}
\newcommand{\csp}{\problemname{CSP}}
\newcommand{\pgm}{\problemname{PGM}}
\newcommand{\cqe}{\problemname{CQE}}
\newcommand{\bcq}{\problemname{BCQ}}
\newcommand{\sat}{\problemname{SAT}}
\newcommand{\ssat}{\problemname{\#SAT}}
\newcommand{\wssat}{\problemname{\#WSAT}}
\newcommand{\scsp}{\problemname{\#CSP}}
\newcommand{\scq}{\problemname{\#CQ}}
\newcommand{\sqcq}{\problemname{\#QCQ}}
\newcommand{\mpf}{\problemname{MPF}}
\newcommand{\FFT}{\problemname{FFT}}
\newcommand{\EVO}{\problemname{EVO}}
\newcommand{\LE}{\problemname{LinEx}}
\newcommand{\CW}{\problemname{CW}}
\newcommand{\CWE}{\problemname{CWE}}
\newcommand{\qcq}{\problemname{QCQ}}
\newcommand{\sacq}{\problemname{\#ACQ}}
\newcommand{\cq}{\problemname{CQ}}


%%% ==== Algorithms
\newcommand{\nprr}{\text{\sf NPRR}\xspace}
\newcommand{\leapfrog}{\text{\sf Leapfrog-Triejoin}\xspace}
\newcommand{\agm}{\text{\sf AGM}\xspace}
\newcommand{\fama}{\text{\sf FaMa}}
\newcommand{\pr}{\mathbb P}
\newcommand{\supp}{\text{\sf supp}}
\newcommand{\lr}{\text{\sf LR}}
\newcommand{\tetris}{\text{\sf Tetris}\xspace}

\newcommand{\sku}{\textsf{s}}
\newcommand{\town}{\textsf{t}}
\newcommand{\week}{\textsf{w}}
\newcommand{\district}{\textsf{d}}
\newcommand{\Sales}{\textsf{sales}}
\newcommand{\Sku}{\textsf{sku}}
\newcommand{\Store}{\textsf{Store}}
\newcommand{\City}{\textsf{city}}
\newcommand{\Country}{\textsf{country}}
\newcommand{\Town}{\textsf{town}}
\newcommand{\Week}{\textsf{week}}
\newcommand{\District}{\textsf{district}}

%%% ==== Common Abbreviations
\newcommand{\calA}{\mathcal A}
\newcommand{\calR}{\mathcal R}
\newcommand{\calL}{\mathcal L}
\newcommand{\calT}{\mathcal T}
\newcommand{\calP}{\mathcal P}
\newcommand{\calX}{\mathcal X}
\newcommand{\calY}{\mathcal Y}
\newcommand{\calB}{\mathcal B}
\newcommand{\calC}{\mathcal C}
\newcommand{\calD}{\mathcal D}
\newcommand{\calE}{\mathcal E}
\newcommand{\calF}{\mathcal F}
\newcommand{\calG}{\mathcal G}
\newcommand{\calH}{\mathcal H}
\newcommand{\calV}{\mathcal V}
\newcommand{\calU}{\mathcal U}

\newcommand{\F}{\mathbb F} % a field
\newcommand{\Z}{\mathbb Z} % integers
\newcommand{\N}{\mathbb N} % the natural numbers
\newcommand{\R}{\mathbb R} % the real numbers
\newcommand{\D}{\mathbf D} % bold-face D, used for generic domain
\newcommand{\Q}{\mathbb Q} % the real numbers
\newcommand{\Mod}{\text{\sf M}}
\newcommand{\Nor}{\text{\sf N}}
\newcommand{\sa}{\text{\sf SA}}


\newcommand{\perm}{\text{perm}}

\newcommand{\stab}{\textnormal{\sc stab}}
\newcommand{\infl}{\textnormal{\sc inf}}
\newcommand{\func}[1]{\textnormal{\sc #1}}

\newcommand{\la}{\leftarrow}
\newcommand{\ra}{\rightarrow}

\newcommand{\gv}[1]{\ensuremath{\mbox{\boldmath$ #1 $}}}
\newcommand{\grad}[1]{\gv{\nabla} #1} % for gradient
\newcommand{\pd}[2]{\frac{\partial#1}{\partial#2}}




\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
%\newcommand{\argmax}{\text{argmax}}

\newcommand{\threesum}{\text{$3$-{\sf SUM}}}
%\newcommand{\pr}{\mathop{\textnormal{Prob}}}
\newcommand{\E}{\mathbb E}

%%% ==== Common shortcuts
\newcommand{\be}{\begin{enumerate}}
\newcommand{\ee}{\end{enumerate}}
\newcommand{\bi}{\begin{itemize}}
\newcommand{\ei}{\end{itemize}}
\newcommand{\beq}{\begin{equation}}
\newcommand{\eeq}{\end{equation}}

\newcommand{\bp}{\begin{proof}}
\newcommand{\ep}{\end{proof}}
\newcommand{\bcor}{\begin{cor}}
\newcommand{\ecor}{\end{cor}}
\newcommand{\bthm}{\begin{thm}}
\newcommand{\ethm}{\end{thm}}
\newcommand{\blmm}{\begin{lmm}}
\newcommand{\elmm}{\end{lmm}}
\newcommand{\bdefn}{\begin{defn}}
\newcommand{\edefn}{\end{defn}}
\newcommand{\bprop}{\begin{prop}}
\newcommand{\eprop}{\end{prop}}
\newcommand{\bconj}{\begin{conj}}
\newcommand{\econj}{\end{conj}}
\newcommand{\bopm}{\begin{opm}}
\newcommand{\eopm}{\end{opm}}
\newcommand{\brmk}{\begin{rmk}}
\newcommand{\ermk}{\end{rmk}}

\newcommand{\qnom}[2]{\genfrac{[}{]}{0pt}{}{#1}{#2}}

\newcommand{\sto}{\textnormal{subject to}}

\newcommand{\norm}[1]{\left\|#1\right\|}

\newcommand{\suchthat}{\ | \ }
\newcommand{\inner}[1]{\left\langle #1 \right\rangle}
\newcommand{\deriv}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\vol}[1]{\mathop{\textnormal{Vol}} #1}
\newcommand{\var}[1]{\mathop{\textnormal{Var}}\left[#1\right]}
\newcommand{\cov}[1]{\mathop{\textnormal{Cov}}\left[#1\right]}
\newcommand{\per}[1]{\mathop{\textnormal{per}} #1}
\newcommand{\trace}[1]{\mathop{\textnormal{tr}} #1}
\DeclareMathOperator{\Tr}{trace}
\newcommand{\vspan}[1]{\mathop{\textnormal{span}}\{#1\}}
\newcommand{\diag}[1]{\mathop{\textsf{diag}} #1}
\newcommand{\DIAG}[1]{\mathop{\textnormal{DIAG}} #1}
\newcommand{\rank}[1]{\mathop{\textnormal{rank}} #1}
\newcommand{\mv}[1]{\mathbf{#1}}

%%% ==== Theorems and stuff
%\iffalse
\theoremstyle{plain}                   % default
\newtheorem{thm}{Theorem}[section]
\newtheorem{lmm}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}

\theoremstyle{definition}              % Examples and all
\newtheorem{pbm}{Problem}
\newtheorem{assumption}{Assumption}
\newtheorem{opm}{Open Problem}
\newtheorem{conj}{Conjecture}
\newtheorem{ex}{Example}
\newtheorem{exer}{Exercise}
\newtheorem{defn}{Definition}
\newtheorem{alg}{Algorithm}
\newtheorem{rmk}{Remark}
\newtheorem{claim}{Claim}
\newtheorem{fact}{Fact}
%\newtheorem*{note}{Note}
%\fi

\definecolor{Red}{RGB}{255,204,204}
\definecolor{Green}{RGB}{204,255,204}
\definecolor{Blue}{RGB}{204,204,255}

%\allowdisplaybreaks
%\usepackage{acmart}

% the following is to prevent references in section headings from capitalization
\usepackage{xpatch}
\usepackage{textcase}
\makeatletter
\xpatchcmd{\@sect}{\uppercase}{\MakeTextUppercase}{}{}
\xpatchcmd{\@sect}{\uppercase}{\MakeTextUppercase}{}{}
\makeatother

%\usepackage[colorlinks=true,linkcolor=blue,citecolor=blue]{hyperref}
% To turn off hyperref "Token not allowed" warnings,
% add "bookmarks=false" to the above hyperref options

\allowdisplaybreaks[1]
\renewcommand{\vec}[1]{\ensuremath\boldsymbol{#1}}
\usepackage[colorlinks=true,linkcolor=blue,citecolor=blue]{hyperref}

%%%% Proceedings format for most of ACM conferences (with the exceptions listed below) and all ICPS volumes.
%\documentclass[sigconf]{acmart}

\usepackage{booktabs} % For formal tables

