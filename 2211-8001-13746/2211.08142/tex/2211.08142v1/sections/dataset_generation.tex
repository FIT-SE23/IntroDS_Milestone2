\section{Equivalent Expressions Dataset}
\label{sec:datagen}
Training our model requires a dataset of mathematically equivalent expression \textit{pairs}. Working off a known collection of simple mathematical expressions, we use SymPy \citep{meurer2017sympy} to create the \textit{Equivalent Expressions Dataset} consisting of $\sim$4.6M equivalent expression pairs. This dataset is available publicly.\footnote{\href{https://mlpgroup.github.io/expemb}{https://mlpgroup.github.io/expemb}}

%In this work, we generate a dataset of equivalent mathematical expressions that we 
%refer to as the Equivalent Expressions Dataset. We discuss the dataset generation process in this section and present the dataset details in section \ref{sec:datasets}.
%For training, we require a set of mathematical expressions for \expemba{} and a set of equivalent expression pairs for \expembe{}. 
%Our dataset generation process consists of two steps. We first generate a set of valid mathematical expressions. For these expressions, we then generate mathematically equivalent expressions. For validation and testing, we only require a set of expressions for both \expemba{} and \expembe{}. This is because the decoder generates an equivalent expression in the case of \expembe{}. As there are multiple valid outputs in this case, we use SymPy to check validity of an output expression rather than fixing one output for every input expression.

\paragraph{Generation.}
To generate valid mathematical expressions, we refer to the work of \citet{lampleDeepLearningSymbolic2019}. We take expressions from their publicly available datasets and perform pre-processing on the input expression to remove the parts that are not necessary for our use case. This process gives us a set of valid mathematical expressions. From this group of expressions, we use SymPy to generate mathematically equivalent but visually different counterparts (see appendix \ref{appendix:eq_exp_generation} for details). For each pair of equivalent expressions $\mathbf{x}_1$ and $\mathbf{x}_2$, we add two examples $(\mathbf{x}_1, \mathbf{x}_2)$ and $(\mathbf{x}_2, \mathbf{x}_1)$ to the dataset. In our data generation process, we encounter expressions that result in NaN (Not a Number) when parsed using SymPy. We exclude examples that contain such expressions from our dataset.

%Similar to \citet{lampleDeepLearningSymbolic2019}, we use the prefix (Polish) notation to represent expressions in our dataset. It is a parenthesis-free notation in which operators precede the operands.\footnote{\href{https://en.wikipedia.org/wiki/Polish_notation}{https://en.wikipedia.org/wiki/Polish\_notation}} For example, an expression $\sin(x) + 2 *\cos(x)$ is written as $+ \; \sin \; x \; * \; 2 \; \cos \; x$ in the prefix notation.

\paragraph{Dataset.}
Our training dataset has 4,662,232 input-output \textit{pairs} comprised of 2,744,809 unique expressions. Note that the number of equivalent expression pairs per unique expression is not straightforward to compute because some expressions result in more equivalent expressions than others. All expressions are univariate and consist of the following operators:
\begin{itemize}
    \itemsep0em
    \item Arithmetic: $+$, $-$, $\times$, $/$, $\mathrm{abs}$, $\mathrm{pow}$, $\mathrm{sqrt}$
    \item Trigonometric: $\sin$, $\cos$, $\tan$, $\cot$, $\sec$, $\csc$, $\sin^{-1}$, $\cos^{-1}$, $\tan^{-1}$
    \item Hyperbolic: $\sinh$, $\cosh$, $\tanh$, $\coth$, $\sinh^{-1}$, $\cosh^{-1}$, $\tanh^{-1}$
    \item Logarithmic/Exponential: $\ln$, $\exp$
\end{itemize}
For embedding analysis, this work only considers simple polynomial and transcendental mathematical expressions, and as such, we limit the input and output expressions to have a maximum of five operators. Table \ref{tab:no_expr_vs_ops} shows the number of expressions containing a particular type of operator. Note that one expression can contain multiple types of operators. The sequence length of the expressions in the training dataset is $16.18 \pm 4.29$. Our validation and test datasets contain 2,000 and 5,000 expressions with sequence lengths of $15.03 \pm 4.31$ and $16.20 \pm 4.13$, respectively.

\begin{table}[]
    \centering
    \begin{tabular}{lr}
        \toprule
        Operator Type &  \# Expressions \\
        \midrule
        Arithmetic & 1,423,972 \\
        Trigonometric & 341,805 \\
        Hyperbolic & 214,731 \\
        Logarithmic/Exponential & 901,460 \\
        \bottomrule
    \end{tabular}
    \caption{Number of expressions containing a type of operator in the Equivalent Expressions Dataset. }
    \label{tab:no_expr_vs_ops}
\end{table}