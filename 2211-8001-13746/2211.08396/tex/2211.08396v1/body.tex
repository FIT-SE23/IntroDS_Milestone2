


\begin{abstract}
	The class of surreal numbers, denoted by $\Nobf$, initially proposed by Conway, is a universal ordered field in the sense that any ordered field can be embedded in it. They include in particular the real numbers and the ordinal numbers. They have strong relations with other fields such as field of transseries.  Following Gonshor, surreal numbers can be seen as signs sequences of ordinal length, with some exponential and logarithmic functions that extend the usual functions over the reals.  $\Nobf$   can actually be seen as an elegant (generalized) power series field with real coefficients, namely Hahn series with exponents in $\Nobf$ itself. 

	Some years ago, Berarducci and Mantova considered derivation over the surreal numbers, seeing them as germs of functions, in correspondence to transseries.
	In this article, following our previous work, we exhibit a sufficient condition on the structure of a surreal field to be stable under all operations among exponential, logarithm, derivation and anti-derivation. Motivated, in the long term, by computability considerations, we also provide a non-trivial application of this theorem:
	the existence of a pretty reasonable field that only requires ordinals up to $\epsilon_\omega$, which is far smaller than $\omegaunCK$ (resp. $\omega_1$), the first non-computable (resp. uncountable) ordinal. 

\end{abstract}

\section{Introduction}
Conway introduced in  \cite{conway2000numbers}  the class of surreal numbers. They were later on  popularized by Knuth \cite{knuth1974surreal}, and then formalized later on by Gonshor \cite{gonshor1986introduction}, and by many other authors.  The general initial idea is to define a class of numbers, based on a concept of ``simplicity''. This permits to obtain a real closed field that both contains the real numbers and the ordinals, as this provides an unification of Dedekind's construction of real numbers in terms of cuts of the rational numbers, and of von Neumann's construction of ordinal numbers by transfinite induction in terms of set membership.

Following the alternative presentation from Gonshor in \cite{gonshor1986introduction}, a surreal number can also be seen as an ordinal-length sequence over $\{+,-\}$, that we call a  \textbf{signs sequence}. Basically, the idea is that such sequences are ordered lexicographically, and have a tree-like structure. Namely, a $+$ (respectively $-$) added to a sequence $x$ denotes the simplest number greater (resp. smaller) than $x$ but smaller (resp. greater) than all the prefixes of $x$ which are greater (resp. smaller) than $x$.   With this definition of surreal numbers, it is possible to define operations such as addition, substraction, multiplication, division, obtaining a real closed field.  
%
%This class of numbers, denoted by $\Nobf$, is fascinating as it includes simultaneously the ordinal numbers  and the real numbers: Ordinal $\lambda$ is interpreted by the sequence of $+$ of length $\lambda$, and signs sequences of finite length correspond to the dyadic rational numbers, while sequences of length $\omega$ include real numbers as well as new numbers such $1/\omega$,  the inverse of ordinal $\omega$. 
%%
Following Gonshor \cite{gonshor1986introduction}, based on ideas from Kruskal, it is also possible to define consistently classical functions such as the exponential function and the  logarithmic function over $\Nobf$, and to do analysis of this fields of numbers. 

It can be considered as ``the'' field that includes ``all numbers great and small'' \cite{ehrlich2012absolute}.  In particular, any divisible ordered Abelian group is isomorphic to an initial subgroup of $\Nobf$, and any real closed field is isomorphic to an initial subfield of $\Nobf$ \cite[Theorems 9 and 19]{ehrlich2001number}, \cite[Theorems 28 and 29]{conway2000numbers}. This leads to the fact that it can be considered as ``the'' field that includes ``all numbers great and small'' \cite{ehrlich2012absolute}.  
%
%Furthermore, the class of surreal numbers have been shown to unify many \textit{a priori} very different concepts and definitions, and with strong model theoretic properties, and in particular the results on $\Nobf$ described so far agree with important results on the model theory of the ordered field of real numbers with restricted analytic functions and the exponential function. See in particular \cite{DriesEhrlich01}, from which we will mention many results, but about which we decided here not to discuss model theoretic aspects. 
$\Nobf$ can also be equipped with a derivation, so that it can be considered as a fields of transseries \cite{berarducci2018surreal}. See example \cite{mantova2017surreal} for a survey of fascinating recent results in all these directions.  
%
%From all these facts, we believe this is fundamental to better understand $\Nobf$ and its subfields,  as the exponential and logarithmic functions are among the simplest functions one would expect to start to do analysis. This article originated from some studies of subfields of $\Nobf$ on which it could be easy to do some computations, both in the sense of computer algebra, but also suitable to discuss computable models over the continuum in the spirit of results such as \cite{JournalACM2017} (considering computations over surreal fields) or in the spirit of \cite{galeotti2016candidate}, considering computations over the ordinals, generalizing classical computability. We believe that the collection of results presented in this article, are only first steps in these directions, but have their interest in their own. 

More concretely, $\Nobf$ can also be seen as a field of (generalized) power series with real coefficients, namely as Hahn series where exponents are surreal numbers themselves. More precisely, write $\HahnField{\Kbb}{G}$ for the set of Hahn series with coefficients in $\Kbb$ and terms corresponding to elements of $G$, where $\Kbb$ is a field, and $G$ is some divisible ordered Abelian group: This means that $\HahnField{\Kbb}{G}$ corresponds to formal power series of the form $s=\sum_{g \in S} a_{g} t^{g}$, where $S$ is a well-ordered subset of $G$ and $a_{g} \in \Kbb .$ The support of $s$ is $\supp(s)=\enstq{g \in S}{a_{g} \neq 0}$ and the length of the serie of $s$ is the order type of $\supp(s)$. The field operations on $\HahnField{\Kbb}{G}$ are defined as expected, considering elements of $\HahnField{\Kbb}{G}$ as formal power series.
%
We have $\Nobf= \HahnField{\Rbb}{\Nobf}$.

Our previous work \cite{bournez2022surreal} has shown that some acceptable subfields of $\Nobf$ are stable by both exponential and logarithm. This fields are built with some restriction on ordinals allowed in the ordinal sum.  In the current article, we pursue the work by exhibiting some acceptable subfields of $\Nobf$ are stable by both exponential and logarithm, derivation and anti-derivation. We actually provide some sufficient condition on the structure of a surreal field to be stable under all these operations among exponential, logarithm, derivation and anti-derivation, and use these to derive such subfields.


\paragraph{More precise statements}
%
Given some ordinal $\gamma$ (or more generally a class of ordinals), we write $\HahnFieldOrd{\Kbb}{G}{\gamma}$ for the restriction of $\HahnField{K}{G}$ to formal power series whose support has an order type in $\gamma$ (that is to say, corresponds to some ordinal less than $\gamma$). We  have of course $\Nobf= \HahnFieldOrd{\Rbb}{\Nobf}{\Ord}$.
In this point of view, \textbf{$\epsilon$-numbers}, \ie{} ordinals $\lambda$, such that
$\omega^\lambda=\lambda$, play a major role as they are such limit on ordinal we can accept in our fields.



As we will often play with exponents of formal power series considered in the Hahn series, we propose to introduce the following notation:  We denote $$\SRF{\lambda}{\Gamma}=\HahnFieldOrd\Rbb{\Gamma}\lambda$$ when  $\lambda$ is an $\epsilon$-number and $\Gamma$ a divisible Abelian group.

As a consequence of MacLane's theorem (Theorem \ref{thm:macLane} below from \cite{maclane1939}, see also \cite[section 6.23]{alling1987foundations}), we know that $\SRF\lambda{\Nolt\mu}$ is a real-closed field when $\mu$ is a \textbf{multiplicative ordinal} (i.e. $\mu=\omega^{\omega^\alpha}$ for some ordinal $\alpha$) and $\lambda$ an $\epsilon$-number.  


Furthermore:

\begin{restatable}[{\cite[Proposition 4.7]{DriesEhrlich01}}]{theorem}{thEhrlichquatresept}
	%\begin{theorem}[{\cite[Proposition 4.7]{DriesEhrlich01,van2001erratum}}] 
	\label{th:Ehrlichquatresept}
	Let $\lambda$ be an $\epsilon$-number. Then
	\begin{enumerate}
		\item The field $\Nolambda$ can be expressed as \begin{equation} \label{eq:troissix} 
			\Nolambda=\bigcup_{\mu} \SRF{\lambda}{\Nolt\mu},
		\end{equation}
		where $\mu$ ranges over the additive ordinals less than $\lambda$ (equivalently, $\mu$ ranges over the multiplicative ordinals less than $\lambda$ ).
		\item  $\Nolambda$ is a real closed subfield of $\No$, and is closed under the restricted analytic functions of $\No$.
		\item $\Nolambda=\SRF{\lambda}{\Nolt\lambda}$ if and only if $\lambda$ is a regular cardinal.
	\end{enumerate}
	%\end{theorem}
\end{restatable}

%\textbf{
%It can be shown that the function $\exp$ is a surjective homomorphism from $(\No, +)$ to $(\No^{>0}, ·)$ which extends $\exp$ on $\R$ and makes $(\No, +, ·, \exp)$ into an elementary extension of $(\R,+,·,\exp)$ (see \cite[Corollaries 2.11 and 4.6]{van1994elementary}, \cite{DriesEhrlich01} and \cite{ressayre1993integer}). As $\exp$ is surjective, and from its properties, it can be shown that it has some inverse $\ln : \No^{>0} \to \No$ (called logarithm).
%}



Actually, even if we always can write $\Nolambda$ as an increasing union of fields by Equation \eqref{eq:troissix},  and even if $\Nolt\lambda$ is stable under exponential and logarithmic functions (Theorem \ref{thm:NoltStableExpLn}) none of the fields in this union has stability property beyond the fact that they are fields. Indeed:

\begin{proposition}[{\cite[Proposition 1.5]{bournez2022surreal}}]
	%\begin{Proposition} 
	\label{prop:instable}
	$\SRF\lambda{\Nolt\mu}$ is never closed under exponential function for $\mu<\lambda$ a multiplicative ordinal. 
	%\end{Proposition}
\end{proposition}


In our previous work \cite{bournez2022surreal}, we studied stability of subfields of $\Nobf$ by exponential and logarithm. 
For the sake of effectiveness and representations for ordinal Turing machines, we kept \textbf{ordinals} as small as possible to identify natural subfields stable by both these functions. This paper will keep the same spirit and we will give an example construction that only involves ordinals up to $\epsilon_\omega$, which is much smaller than $\omega_1$, the first \textbf{uncountable} ordinal, and even $\omegaunCK$, the first \textbf{non-computable} ordinal.


To achieve that purpose, we will have to handle carefully the $\epsilon$-numbers that are involved. Recall that there is some enumeration $(\epsilon_{\alpha})_{\alpha \in \Ord}$of $\epsilon$-numbers: 
Any $\epsilon$-number ordinal $\lambda$ is $\epsilon_\alpha$ for some ordinal $\alpha$.
%
%In short, such a sequence can be seen as a  dichotomous search. At the beginning, the whole space is unexplored. Encountering a plus we go forward and we forbid access to the space on the left of where we come from. Encountering a minus  we go backward and forbid access to the right of where we come from. 
%%\begin{center}
%%	\includegraphics[scale=.7]{../standalones/suiteSignes/suiteSignes.pdf}
%%\end{center}
%This leads to some total order on  signs sequences.  

%
%
%It is then natural to bound the length of these sequences by some ordinal $\alpha$. Thus we will get the set $\Nolt\alpha$ of all surreal number of length less than $\alpha$.
%Sets such as $\Nolt\alpha$ can then support some algebraic structures such as being a group, a ring or a field. They also can be stable under exponential and logarithm. It turns out that stability under field operations is equivalent to stability under $\exp$, and $\ln$ for $\Nolambda$.
%
%
%Ordinal numbers can be considered as particular surreal numbers: ordinal $\alpha$ corresponds to the surreal number whose signs sequence is the  sequence of length $\alpha$ containing only pluses. 
%It is well-known that any ordinal number as Cantor normal form: it can be written in the form $\Sum{k=1}{n}\omega^{\alpha_i}n_i$ where the $n_i$s are non-zero natural numbers and the $\alpha_i$s are a decreasing chain of ordinal numbers.    Conway, and then Gonshor, have proved that surreal numbers also have a normal form that is a generalization of the Cantor normal form for ordinal numbers: Any surreal number can be written in normal form as $\aSurreal$ where the $r_i$s are real numbers and the $a_i$s are a decreasing sequence of surreal numbers, and $\nu$ is some ordinal. 
%
%This proves that surreal numbers can be seen as particular Hahn series, where exponents are surreal numbers themselves. Considering a set $S$ and some ordinal $\lambda$, it is then natural to consider the subset of surreal numbers defined as follows~:
%$$
%	\SRF\lambda S = \enstq{\aSurreal}{\begin{array}{l}
%			\nu<\lambda\qquad r_0\in\R^*\qquad\\
%			\forall i<\nu\qquad a_i\in S\wedge r_i\in\R\\
%			\forall i<j\qquad a_i>a_j
%		\end{array}}
%$$
%As formal series structure, $\SRF\lambda S$ quickly gets some algebraic properties. For instance, if $\lambda$ is an additive ordinal, $\SRF\lambda S$ is a group (for addition) whenever $S\neq\emptyset$. If $\lambda$ is a multiplicative ordinal, and if $S$ in actually (Abelian) subgroup of $\No$, then $\SRF\lambda S$ is a commutative subring of $\No$, and if $\lambda$ is even an $\epsilon$-number, we get a field. As a consequence of MacLane's theorem (Theorem \ref{thm:macLane} below from \cite{maclane1939}), if $S$ is a divisible group (i.e. for all $x\in S$ and for all $n\in\Nbb$ there is some $y\in S$ such that $ny=x$) then $\SRF\lambda S$ is a real-closed field (see \cite[section 6.23]{alling1987foundations}). 
%
%In this article, we are focusing on such fields. More precisely, we will give structure and conditions so that theses field can get stability under even more operation, namely the exponential and the natural logarithm. Some previous work actually studied $\SRF\kappa{\Nolt\kappa}$ for regular cardinals $\kappa$. More precisely, \cite[Proposition 4.1 and Corollary 5.5]{ehrlich} show that $\Nolt\kappa = \SRF\kappa{\Nolt\kappa}$ \tiff $\kappa$ is a regular cardinal and that it is stable under exponential and logarithm. In 2016, Galeotti studied the completion of $\Nolt\kappa$ in \cite{galeotti2016candidate} to make it a candidate for the generalization of $\R$ giving up the Archimedean property. However, in the purpose of effectiveness and representations for ordinal Turing machines, regular cardinals somehow inaccessible without using them explicitly. But the same also happen for countable admissible ordinals such as $\omegaunCK$. Our ambition is to study field of surreal numbers that have may closure properties but still remain in some admissible set. Therefore, we need to make study for $\epsilon$-numbers and not only regular cardinals.
%To achieve that purpose, we will have to handle carefully the $\epsilon$-numbers that are involved and thus will a canonical expression to define each of them.

\begin{definition}[Canonical sequence defining an $\epsilon$-number]
	\label{def:gammaLambda}
	%	Let $\lambda$ be an $\epsilon$-number. Let $\alpha$ the unique ordinal such that $\lambda=\epsilon_\alpha$ (i.e. $\lambda$ is the $\alpha$-th $\epsilon$-number). 
	%	The canonic sequence defining $\lambda$ is the sequence $\suitelt{e_\beta}\beta{\gamma_\lambda}$ of length $\gamma_\lambda$ (that depends on $\lambda$) such that
	%	$$\lambda = \sup\suitelt{e_\beta}\beta{\gamma_\lambda}$$
	%	$$e_\beta=\begin{accolade}
	%		\left.\omega^{\iddots^{\omega}}\right\} \beta+1\text{ occurrences of }\omega & \text{if }\alpha=0\text{ and }\beta\in\Nbb\\
	%		\left.\epsilon_{\alpha-1}^{\iddots^{\epsilon_{\alpha-1}}}\right\} \beta+1\text{ occurrences of }\epsilon_{\alpha-1} & \text{if }\alpha\text{ is a successor ordinal and }\beta\in\Nbb\\
	%		\epsilon_\beta & \text{if }\alpha\text{ is a non-zero limit ordinal}
	%	\end{accolade}$$
	%	and $$\gamma_\lambda=\begin{accolade}
	%		\omega & \text{if }\alpha\text{ is a successor ordinal or if }\alpha=0\\
	%		\alpha & \text{if }\alpha\text{ is a non-zero limit ordinal}
	%	\end{accolade}$$
	Let $\lambda$ be an $\epsilon$-number.  Ordinal $\lambda$ can always  be written as $\lambda=\sup\suitelt{e_\beta}\beta{\gamma_\lambda}$ for some \textbf{canonical sequence}, where $\gamma_\lambda$ is the length of  this sequence, and this sequence is defined as follows:
	\begin{itemize}
		\item If $\lambda=\epsilon_{0}$ then we can write $\epsilon_0=\sup\{\omega,\omega^\omega,\omega^{\omega^\omega},\dots\}$ and  we take\linebreak $\omega,\omega^\omega,\omega^{\omega^\omega},\dots$ as canonical sequence for $\epsilon_0$. Its length is $\omega$, and for $\beta<\lambda$, $e_\beta$ is $\omega^{\iddots^\omega}$ where there are $\beta$ occurrences of $\omega$ in the exponent.
		
		\item If $\lambda=\epsilon_{\alpha}$, where $\alpha$ is a non-zero limit ordinal, then we can write $\lambda=\underset{\beta<\alpha}\sup\epsilon_\beta$ and we take $\suitelt{\epsilon_\beta}\beta\alpha$ as the canonical sequence of $\lambda$. Its length is $\alpha$ and for $\beta<\alpha$, $e_\beta=\epsilon_\beta$.
		
		\item If $\lambda=\epsilon_{\alpha}$, where  $\alpha$ is a successor ordinal, then we can write 
		$$\lambda=\sup\{\epsilon_{\alpha-1}, {\epsilon_{\alpha-1}}^{\epsilon_{\alpha-1}}, {\epsilon_{\alpha-1}}^{{\epsilon_{\alpha-1}}^{\epsilon_{\alpha-1}}},\dots\}$$
		and we take $\epsilon_{\alpha-1}, {\epsilon_{\alpha-1}}^{\epsilon_{\alpha-1}}, {\epsilon_{\alpha-1}}^{{\epsilon_{\alpha-1}}^{\epsilon_{\alpha-1}}},\dots$ as the canonical sequence of $\lambda$. Its length is $\omega$, and for $\beta<\omega$, $e_\beta={\epsilon_{\alpha-1}}^{\iddots^{\epsilon_{\alpha-1}}}$ where there are $\beta$ occurrences of $\epsilon_{\alpha-1}$ in the exponent.
	\end{itemize}
\end{definition}

For example, the canonical sequence defining $\epsilon_1$ is $\epsilon_0,{\epsilon_0}^{\epsilon_0},{\epsilon_0}^{{\epsilon_0}^{\epsilon_0}},\dots$, the canonical sequence defining $\epsilon_\omega$ is $\epsilon_0,\epsilon_1,\epsilon_2,\dots$, 
the canonical sequence of $\epsilon_{\omega2}$ is 
$\epsilon_0,\epsilon_1,\epsilon_2,\dots,\epsilon_\omega,\epsilon_{\omega+1},\dots$ and the canonical sequence of $\epsilon_{\omega2+1}$ is \linebreak ${\epsilon_{\omega2}},{\epsilon_{\omega2}}^{\epsilon_{\omega2}}, {\epsilon_{\omega2}}^{{\epsilon_{\omega2}}^{\epsilon_{\omega2}}},\dots$

\begin{definition}
	\label{def:uparrow}
	Let $\Gamma$ be an Abelian subgroup of \Nobf{} and $\lambda$ be an $\epsilon$-number whose canonical sequence is $\suitelt{e_\beta}\beta{\gamma_\lambda}$. 
	We denote $\Gamma^{\uparrow\lambda}$ for the family of group $\suitelt{\Gamma_\beta}\beta{\gamma_\lambda}$ defined as follows:
	\begin{itemize}
		\item $\Gamma_0=\Gamma$;
		
		\item $\Gamma_{\beta+1}$ is the group generated by the groups $\Gamma_\beta$, $\SRF{e_\beta}{g\pa{(\Gamma_\beta)^*_+}}$ and the set $\enstq{h(a_i)}{\aSurreal\in\Gamma_\beta}$
		where $g$ and $h$ are Gonshor's functions associated to exponential and logarithm (see Section \ref{sec:expoLn} below for some details);
		
		\item For a limit ordinal number $\beta$, $\Gamma_\beta=\Unionlt\gamma\beta \Gamma_\gamma$.
	\end{itemize}
\end{definition}

When considering a family of set $(S_i)_{i\in I}$, we denote
\centre{$
\SRF\lambda{(S_i)_{i\in I}} = \Unionin iI \SRF\lambda{S_i}
$}
\lc{In particular,}
{$
\SRF\lambda{\Gamma^{\uparrow\lambda}} = \Unionlt i{\gamma_\lambda}\SRF\lambda{\Gamma_i}
$}
\begin{remark}\label{rk:inclusionUparrow}
	By construction, if $\Gamma\subseteq\Gamma'$ then $\SRF\lambda{\Gamma^{\uparrow\lambda}} \subseteq \SRF\lambda{{\Gamma'}^{\uparrow\lambda}}$.
\end{remark}
The idea behind the definition of $\Gamma^{\uparrow}$ is that at step $i+1$ we add new elements to close $\SRF\lambda{\Gamma_i}$ under exponential and logarithm. The reason why we add $\SRF{e_\beta}{g\pa{(\Gamma_\beta)^*_+}}$ to $\Gamma_\beta$ rather than $\SRF\lambda{g\pa{(\Gamma_\beta)^*_+}}$ is that we want to keep control on what we add in the new group. In our previous work \cite{bournez2022surreal} we came up with the following three statements:

\begin{lemma}[{\cite[Lemma 5.7]{bournez2022surreal}}]
	\label{lem:LogAtomicDesGammai}
	Write $\Gamma^{\uparrow\lambda}=\suitelt{\Gamma_\beta}\beta{\gamma_\lambda}$, and let 
	$$L=\enstq{\exp_n x, \ln_nx}{\begin{array}{c}
			x\in\Lbb,\ n\in\Nbb,\\
			\exists y\in\RlG\ \exists P\in\Pcal(y)\ \exists k\in\Nbb\quad P(k)=x
		\end{array}}$$
	we have for all $i<\gamma_\lambda$,
	$$L=\enstq{\exp_n x, \ln_nx}{\begin{array}{c}
		x\in\Lbb, n\in\Nbb,\\ 
		\exists y\in\SRF\lambda{\Gamma_i}\ \exists P\in\Pcal(y)\ \exists k\in\Nbb\quad P(k)=x
		\end{array}}$$
\end{lemma}

\begin{corollary}[{\cite[Corollary 5.8]{bournez2022surreal}}]
	\label{cor:LogAtomicDeGammaUp}
	Let $\Gamma$ be an Abelian additive subgroup of $\Nobf$ and
	$$L=\enstq{\exp_n x, \ln_nx}{\begin{array}{c}
			x\in\Lbb, n\in\Nbb, \\
			\exists y\in\RlG\ \exists P\in\Pcal(y)\ \exists k\in\Nbb\quad P(k)=x
		\end{array}}$$
	Then,
	$$L = \enstq{\exp_n x, \ln_nx}{\begin{array}{c}
			x\in\Lbb,\quad n\in\Nbb,\\
			\exists y\in\RlGup\ \exists P\in\Pcal(y)\ \exists k\in\Nbb\quad P(k)=x
	\end{array}}$$
\end{corollary}

\begin{restatable}[{\cite[Theorem 1.10]{bournez2022surreal}}]{theorem}{thmSRFGammaUpStableExpLn}
	%\begin{theorem}
	\label{thm:SRFGammaUpStableExpLn}
	Let $\Gamma$ be an Abelian subgroup of \Nobf{} and $\lambda$ be an $\epsilon$-number, then
	$\SRF\lambda{\Gamma^{\uparrow\lambda}}$ is stable under exponential and logarithmic functions.
	%\end{theorem}
\end{restatable}

With such a notion, we managed to make a link between the two types of field involved in Theorems \ref{thm:NoltStableExpLn} and \ref{thm:SRFGammaUpStableExpLn}. More precisely, the fields $\SRF\lambda{\Gamma^{\uparrow\lambda}}$ are part of the fields $\Nolt\lambda$.

\begin{restatable}[{\cite[Theorem 1.11]{bournez2022surreal}}]{theorem}{thmNolambdaDecompCorpsStables}
	%\begin{theorem}
	\label{thm:NolambdaDecompCorpsStables}
	$\Nolambda=\bigcup_{\mu} \SRF{\lambda}{{\Nolt{\mu}}^{\uparrow \lambda}}$, where $\mu$ ranges over the additive ordinals less than $\lambda$ (equivalently, $\mu$ ranges over the multiplicative ordinals less $\lambda$),
	%\end{theorem} 
\end{restatable}
Notice that now,  $\Nolambda$ is  expressed as a increasing union of fields, each of them closed by $\exp$ and $\ln$. Indeed, by definition, if $\mu<\mu'$ then $\Nolt\mu\subseteq\Nolt{\mu'}$ and Remark \ref{rk:inclusionUparrow} gives $\SRF{\lambda}{{\Nolt{\mu}}^{\uparrow \lambda}} \subseteq \SRF{\lambda}{{\Nolt{\mu'}}^{\uparrow \lambda}}$. 

Finally, we proved that each field $\SRF{\lambda}{{\Nolt{\mu}}^{\uparrow \lambda}}$ is interesting for itself since none of them is $\Nolambda$. More precisely: 

\begin{restatable}[{\cite[Theorem 1.12]{bournez2022surreal}}]{theorem}{thmhierarchieUparrow}
	%\begin{theorem}
	\label{thm:hierarchieUparrow}
	For all $\epsilon$-number $\lambda$, the hierarchy in previous theorem is strict:
	$$\SRF{\lambda}{{\Nolt{\mu}}^{\uparrow \lambda}} \subsetneq \SRF{\lambda}{{\Nolt{\mu'}}^{\uparrow \lambda}}$$	
	for all multiplicative ordinals $\mu$ and $\mu'$ such that $\omega<\mu<\mu'<\lambda$.
	%\end{theorem}
\end{restatable}


In this article, we will go further and investigate the case of stability under derivative and anti-derivative.

\begin{restatable}{mainthm}{thmcorpsStable}
	\label{thm:corpsStable}
	Let $\alpha$ be a limit ordinal %Let $\eta<\epsilon_\alpha$. 
	and $\suitelt{\Gamma_\beta}\beta\alpha$ be a sequence of Abelian subgroups of $\Nobf$ such that
	\begin{itemize}
		\item $\forall\beta<\alpha\quad \forall\gamma<\beta\qquad \Gamma_\gamma\subseteq\Gamma_\beta$
		
		\item $\forall\beta<\alpha\qquad \omega^{(\Gamma_\beta)^*_+}\succ^K\kappa_{-\epsilon_\beta}$
		
		\item  $\forall\beta<\alpha\quad \forall\gamma<\epsilon_\beta\qquad \kappa_{-\gamma}\in\omega^{\Gamma_\beta}$
		
		\item $\forall\beta<\alpha\quad\exists\eta_\beta<\epsilon_\beta\quad \forall x\in\omega^{\Gamma_\beta}\qquad \NR(x)<\eta_\beta$
	\end{itemize}
	Then $\Unionlt\beta\alpha \SRF{\epsilon_\beta}{\Gamma_\beta^{\uparrow\epsilon_\beta}}$ is stable under $\exp$, $\ln$, $\partial$ and anti-derivation (see section \ref{sec:deriv}).
\end{restatable}

Actually, we mainly focus on properties of the derivation suggested by Beraducci and Mantova and its anti-derivation. In particular, we establish various bounds that are useful to find fields stable under derivation and anti-derivation. We also prove the following:

\begin{restatable}{proposition}{propmajorationNuPartial}
	\label{prop:majorationNuPartial}
	For any $x\in\Nobf$, the set $\Pcal_\Lbb(x)$ is well-ordered with order type
	$\beta<\omega^{\omega^{\omega(\NR(x)+1)}}$. In particular,
	\centre{$\nu(\partial x)<\omega^{\omega^{\omega(\NR(x)+1)}}$}
\end{restatable}

In the above proposition and the above theorem, $\NR$ is the \textbf{nested truncation rank} which is defined in Definition \ref{def:nestedTruncRk} and $\nu(x)$ is the length of the series of the normal form the surreal number $x$ (see Definition \ref{def:nu}). The previous proposition is essential to control derivatives of surreal numbers and then get field stable under derivation. To handle anti-derivation, we came up with the following proposition:

\begin{restatable}{proposition}{propsupportPhi}
	\label{prop:supportPhi}
	Let $x$ be a surreal number. Let $\gamma$ be the smallest ordinal such that $\kappa_{-\gamma}\prec^K P(k_P)$ for all path $P\in\Pcal_\Lbb(x)$. Let $\lambda$ be the least $\epsilon$-number greater than $\NR(x)$ and $\gamma$. Then $\Unionin i\Nbb \supp\Phi^i(x)$ (see Definition \ref{def:phi}) is reverse well-ordered with order type less than $\omega^{\omega^{\lambda+2}}$.
\end{restatable} 

Thanks to Propositions \ref{prop:majorationNuPartial} and \ref{prop:supportPhi}, we will be able to prove our main theorem:


\paragraph{Organization of the paper}

This article is organized as follows. Section \ref{sec:toolbox} is a quick reminder of some lemmas about order types that will be useful at the end of this article. Section \ref{sec:introsurreals} recalls basics of the concepts and definitions of the theory of surreal numbers, and fixes the notations used in the rest of the paper. Section \ref{sec:erhlichandco} recalls what is known about the stability properties of various subfields of $\Nobf$ according to their signs sequence representation or Hahn series representation.  In Section \ref{sec:expoLn} we recall the definitions and properties of exponential and logarithm. In Section \ref{sec:deriv}, we recall some existing literature about log-atomic numbers and derivation and established some result about the nested truncation rank, a notion of rank related to the structure of the surreal numbers and to log-atomic numbers. Finally, in Section \ref{sec:stable}, we build surreal fields that are stable under exponentiation, logarithm, derivation and anti-derivation. We also show how this construction can lead too an example which  only uses ``small'' ordinals, which is good from a Computability Theory point of view.

\section{Order type toolbox}
\label{sec:toolbox}
\input{part-toolbox}

\section{Surreal numbers}
\label{sec:introsurreals}
\input{part-surreals}

\subsection{Hahn series}
\label{sec:hahn}
\input{part-hahn-series}




\section{Surreal subfields}
\label{sec:erhlichandco}

\subsection{Subfields defined by Gonshor's representation}
\input{part-ehrlich-gonshor.tex}


\subsection{Subfields defined from Hahn's series representation}
\input{part-ehrlich-hahn.tex}


\section{Exponentiation and logarithm}
\label{sec:expoLn}
\input{part-def-exponential-log}
\input{part-stabexpln}

\section{The class of log-atomic numbers, derivation and anti-derivation}
\label{sec:deriv}
\input{part-deriv}

\section{Field stable under exponential, logarithm, derivation and anti-derivation}
\label{sec:stable}
\input{part-stablepartial}