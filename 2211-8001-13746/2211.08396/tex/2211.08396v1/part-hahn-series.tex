%!TEX root = paper-stabilite-exp-log.tex
 
 
%
% For a divisible ordered Abelian group $G$ and a field $\K$, the Hahn series have the form $\sum_{i<\alpha} a_{i} t^{g_{i}}$, where $a_{i} \in \K$ and $\left(g_{i}\right)_{i \in \alpha}$ is an increasing sequence of elements of $G$ indexed by an ordinal $\alpha .$ 
%% If $G$ has cardinality $\kappa$, the length of the sequence may be any ordinal $\alpha<\kappa^{+}$. 
% 
% 
%Maclane proved the analogue of the Newton-Puiseux
%Theorem for Hahn fields, showing that if $\K$ is an algebraically closed field of characteristic 0, and $G$ is a divisible ordered Abelian group, then the set $\K((G))$ of Hahn series is a field that is again algebraically closed.
%
%\subsubsection{Formal }
\subsubsection{Generalities}
Let $\Kbb$ be a field, and let $G$ be a divisible ordered Abelian group.

\begin{definition}[Hahn series \cite{hahn1995nichtarchimedischen}]
The Hahn series (obtained from $\Kbb$ and $G$) are formal power series of the form $s=\sum_{g \in S} a_{g} t^{g}$, where $S$ is a well-ordered subset of $G$ and $a_{g} \in \Kbb .$ The support of s is $\supp(s)=\enstq{g \in S}{ a_{g} \neq 0}$ and the length of $s$ is the order type of $\supp(s)$.

We write $\HahnField{\Kbb}{G}$ for the set of Hahn series with coefficients in $\Kbb$ and terms corresponding to elements of $G$. 
\end{definition}

\begin{definition}[Operations on $\HahnField{\Kbb}{G}$]
The operations on $\HahnField{K}{G}$ are defined in the natural way:
 Let $s=\sum_{g \in S} a_{g} t^{g}, s^{\prime}=\sum_{g \in S^{\prime}} a_{g}^{\prime} t^{g}$, where $S, S^{\prime}$ are well
ordered.
\begin{itemize}
\item $s+s^{\prime}=\sum_{g \in S \cup S^{\prime}}\left(a_{g}+a_{g}^{\prime}\right) t^{g}$, where $a_{g}=0$ if $g \notin S$, and $a_{g}^{\prime}=0$ if $g \notin S^{\prime}$.
\item $s \cdot s^{\prime}=\sum_{g \in T} b_{g} t^{g}$, where $T=\enstq{g_{1}+g_{2}}{g_{1} \in S \wedge g_{2} \in S^{\prime}}$, and for
each $g \in T$, we set
$b_{g}=\Sum{g_{1}\in S, g_{2}\in S' | g_1+g_2=g}{} b_{g_{1}} \cdot b_{g_{2}}$
\end{itemize}
\end{definition}

Hahn fields inherits a lot of from the structure of the coefficient field. In particular if $\Kbb$ is algebraically closed, and if  $G$ is some divisible (i.e. for any $n\in\Nbb$ and $g\in G$ there is some $g'\in G$ such that $ng'=g$) ordered Abelian group, then the corresponding Hahn field is also algebraically closed. More precisely: 

\begin{theorem}[Generalized Newton-Puiseux Theorem, Maclane \cite{maclane1939}]
	\label{thm:macLane}
	Let $G$ be a divisible ordered Abelian group, and let $\Kbb$ be a field that is algebraically closed of characteristic $0$. Then $\HahnField{\Kbb}{G}$ is also algebraically closed.
\end{theorem}
%It is this theorem than can also lead to the following fact :
As noticed in \cite{alling1987foundations}, we can deduce the following:
\begin{corollary}
	Let $G$ be a divisible ordered Abelian group, and let $\Kbb$ be a field that is real closed of characteristic $0$. Then $\HahnField{\Kbb}{G}$ is also real closed.
\end{corollary}

\begin{proof}
	$\Kbb$ is real closed. That is to say that $-1$ is not a square in $\Kbb$ and that $\Kbb[i]$ is algebraically closed. Notice that $\Kbb[i]((G))=\left(\Kbb((G))\right)[i]$. Therefore, Theorem \ref{thm:macLane} ensures that $\left(\Kbb((G))\right)[i]$ is algebraically closed. Also, $-1$ is not a square in $\Kbb((G))$. Therefore, $\Kbb((G))$ is real closed. 
\end{proof}

%Theorem \cite[Theorem 5.10]{gonshor1986introduction} we mentioned in the previous section actually make use of this corollary. Gonshor could use it because of the normal form theorem for surreal number we discuss in the following.

\subsubsection{Restricting length of ordinals}

%\TODO{Propose d'utiliser la notation d'autres papiers, tant qu'a faire, plutÃ´t que d'en introduire une nouvelle}

In this article, will often restrict the class of ordinals allowed in the ordinal sum, namely by restricting to ordinals up to some ordinal $\lambda$. We then give the following notation:
\begin{definition}[$\HahnFieldOrd{\Kbb}{G}{\gamma}$]
Let $\lambda$ be some ordinal.  We define $\HahnFieldOrd{\Kbb}{G}{\gamma}$ for the restriction of $\HahnField{\Kbb}{G}$ to formal power series whose support has an order type in~$\gamma$ (that is to say, corresponds to some ordinal less than $\gamma$).
\end{definition}

%We have of course $\Nobf= \HahnFieldOrd{\R}{\Nobf}{\Ord}$.


% 
%	$\HahnFieldOrd{\K}{G}{\gamma}=\enstq{x\in\HahnField{\K}{G}}{\supp x < \lambda}$ where the relation $<$ is surcharged to compare the order types.

\begin{theorem}
Assume $\gamma$ is some $\epsilon$-number. Then $\HahnFieldOrd{\Kbb}{G}{\gamma}$ is a field.
\end{theorem}

\begin{proof}
This basically relies on the observation that the length of the inverse of some Hahn series in this field remains in the field: This is basically a consequence of Proposition \ref{prop:orderTypeMonoid}.
\end{proof}

%\begin{proposition}[{\cite[Corollary 1]{weiermannMaximalOrderType}}]
%	\label{prop:orderTypeMonoid}
%	Let $\Gamma$ be an ordered abelian group and $S\subseteq\Gamma_+$ be a well-ordered subset with order type $\alpha$. Then, $\inner S$, the monoid generated by $S$ in $\Gamma$ is itself well-ordered with order type at most $\omega^{\hat{\alpha}}$
%	where, if $\alpha$ is in Cantor normal form
%	$$\alpha=\Sum{i=1}{n}\omega^{\alpha_i}n_i$$
%	then
%	$$\hat\alpha = \Sum{i=1}{n}\omega^{\alpha_i'}n_i$$
%	where $\beta'=\begin{accolade}
%			\beta+1 & \text{if $\beta$ is an $\epsilon$-number}\\
%			\beta & \text{otherwise}
%		\end{accolade}$.
%	In particular, $\inner S$ has order type at most $\omega^{\omega\alpha}$ (commutative multiplication over ordinals).
%\end{proposition}

We also get:

\begin{proposition}[{\cite[Lemma 4.6]{DriesEhrlich01}}] 
	\label{prop:hahnFieldRealClosed}
Assume $\Kbb$ is some real closed field, and $G$ is some abelian divisible group.  Then $\HahnFieldOrd{\Kbb}{G}{\gamma}$ is real closed.
\end{proposition}

Actually, this was stated in \cite[Lemma 4.6]{DriesEhrlich01} for the case $\Kbb=\Rbb$, but the proof ony uses the fact that $\Rbb$ is real-closed. 

\subsubsection{Normal form theorem for surreal numbers}

\begin{definition}
	For $a$ and $b$ two surreal numbers, we define the following relations: 
	\begin{itemize}
		\item $a\prec b$ if for all $n\in\Nbb$, $n|a|<|b|$.
		\item $a\preceq b$ if there is some natural number $n\in\Nbb$ such that $|a|<n|b|$.
		\item $a\asymp b$ if $a\preceq b$ and $b\preceq a$.
	\end{itemize}
\end{definition}
With this definition, $\preceq$ is a preorder and $\prec$ is the corresponding strict preorder. The associated equivalence relation is $\asymp$ and the equivalence classes are the Archimedean classes.

\begin{theorem}[{\cite[Theorem 5.1]{gonshor1986introduction}}]
	For all surreal number $a$ there is a unique positive surreal $x$ of minimal length such that $a\asymp x$.
\end{theorem}
The unique element of minimal length in its Archimedean class has many properties  similar to those of exponentiation:

\begin{definition}
	For all surreal number $a$ written in canonical representation $a=\crotq{a'}{a''}$, we define
	$$
		\omega^a=\crotq{0,\enstq{n\omega^{a'}}{n\in\Nbb}}{\enstq{\frac1{2^n}\omega^{a''}}{n\in\Nbb}}
	$$
	we call such surreal numbers \textbf{monomials}.
\end{definition}
Actually this definition is uniform (\cite[Corollary 5]{gonshor1986introduction}) and therefore, we can use any representation of $a$ in this definition. Another point is that we can easily check that this notation is consistent with the ordinal exponentiation. More precisely, if $a$ is an ordinal, $\omega^a$ is indeed the ordinal corresponding to the ordinal exponentiation (see \cite[Theorem 5.4]{gonshor1986introduction}). Finally, as announced, this definition gives the simplest elements among the Archimedean classes.

\begin{theorem}[{\cite[Theorem 5.3]{gonshor1986introduction}}]
	A surreal number is of the form $\omega^a$ if and only if it is simplest positive element in its Archimedean class. More precisely,
	$$
		\forall a\in\No\qquad (\exists c\in\No\quad a=\omega^c)\implies (\forall b\in\Nobf\quad b\asymp a\implies a\sqsubseteq |b|)
	$$
\end{theorem}

Elements of the form $\omega^a$ are by definition positive and have the following property: 

\begin{proposition}[{\cite[Theorem 5.4]{gonshor1986introduction}}]
	We have 
	\begin{itemize}
		\item $\omega^0=1$
		\item $\forall a,b\in\No\qquad \omega^a\omega^b=\omega^{a+b}$
	\end{itemize}
\end{proposition}

Thanks to this definition of the $\omega$-exponentiation, we are now ready to expose a normal form for surreal numbers which is analogous to the Cantor normal form for ordinal normal. 

\begin{definition}[{\cite[Section 5C, page 59]{gonshor1986introduction}}]
	For $\nu$ an ordinal number, $\suitelt{r_i}i\nu$ a sequence of non-zero real numbers and $\suitelt{a_i}i\nu$ a decreasing sequence of surreal numbers, we define $\aSurreal$ inductively as follows:
	\begin{itemize}
		\item If $\nu=0$, then $\aSurreal=0$
		\item If $\nu=\nu'+1$ then $\aSurreal=\aSurrealPrefix+r_{\nu'}\omega^{a_{\nu'}}$
		\item If $\nu$ is a limit ordinal, $\aSurreal$ is defined as the following bracket:
		$$
			\crotq{\enstq{\aSurrealPrefix + s\omega^{a_{\nu'}}}{
					\begin{array}{c}
						\nu'<\nu\\ s<r_{\nu'}
					\end{array}}}{\enstq{\aSurrealPrefix+s\omega^{a_{\nu'}}}{\begin{array}{c}
					\nu'<\nu\\ s>r_{\nu'}
				\end{array}}}
		$$
	\end{itemize}
\end{definition}
Note that if $0$ is seen as a limit ordinal, then both definition are consistent.

\begin{theorem}[{\cite[Theorem 5.6]{gonshor1986introduction}}]
	\label{thm:normalForm}
	Every surreal number can has a unique writing of the form $\aSurreal$. This expression will be called its \textbf{normal form}. 
\end{theorem}
Note that  if $a$ is an ordinal number, then its normal form coincides with its Cantor normal form. In such a sum, elements $r_i\omega^{a_i}$ will be called the \textbf{terms} of the series.

\begin{definition}
	\label{def:nu}
	The length of the series in the normal form of a surreal number $x$ is denoted $\nu(x)$.
\end{definition}

\begin{definition}
	A surreal number $a$ in normal form $a=\aSurreal$ is
	\begin{itemize}
		\item \textbf{purely infinite} if for all $i<\nu$, $a_i>0$. $\Nobf_\infty$ will stand for the class of purely infinite numbers.
		\item \textbf{infinitesimal} if for all $i<\nu$, $a_i<0$ (or equivalently if $a\prec 1$). 
		\item \textbf{appreciable} if for all $i<\nu$, $a_i\leq0$ (or equivalently if $a\preceq 1$).
	\end{itemize}
	If $\nu'\leq\nu$ is the first ordinal such that $a_i\leq0$, then $\aSurrealPrefix$ is called the \textbf{purely infinite part} of $a$. Similarly, if $\nu'\leq\nu$ is the first ordinal such that $a_i<0$, $\Sumlt {\nu'\leq i}\nu r_i\omega^{a_i}$ is called the \textbf{infinitesimal part} of $a$.
\end{definition}

\begin{theorem}[{\cite[Theorems 5.7 and 5.8]{gonshor1986introduction}}]
	\label{thm:normalFormOp}
	Operation over surreal numbers coincides with formal addition and formal multiplication over the normal forms. More precisely,
	
	$$
		\aSurreal+\Sumlt i{\nu'}s_i\omega^{b_i} = \Sum{x\in\No}{}t_x\omega^x
	$$
	where
	\begin{itemize}
		\item $t_x=r_i$ if $i$ is such that $a_i=x$ and there is no $i$ such that $b_i=x$.
		\item $t_x=s_i$ if $i$ is such that $b_i=x$ and there is no $i$ such that $a_i=x$.
		\item $t_x=r_i+s_j$ if $i$ is such that $a_i=x$ and $j$ is such that $b_j=x$
	\end{itemize}
	and
	$$
		\pa{\aSurreal}\pa{\Sumlt i{\nu'}s_i\omega^{b_i}}= \Sum{x\in\No}{}\pa{\Sum{\tiny\enstq{\begin{array}{c}
						i<\nu\\ j<\nu'
				\end{array}}{a_i+b_j=x}}{}r_is_j}\omega^x
	$$
\end{theorem}

We stated that every surreal number has a normal form. However, in the other direction, it is possible to get back the sign expansion from a normal form. 

\begin{definition}[Reduced sign expansion, Gonshor, \cite{gonshor1986introduction}]
	\label{def:reducedSignExpansion}
	Let $x=\Sum{i<\nu}{}r_i\omega^{a_i}$ be a surreal number. The reduced 
	sign expansion of $a_i$, denoted $a_i^\circ$ is inductively defined as follows:
	\begin{itemize}
		\item $a_0^\circ=a_0$
		\item For $i>0$, if $a_i(\delta)=-$ and if there is there is $j<i$ 
		such that for $\gamma\leq\delta$, $a_j(\gamma)=a_i(\gamma)$, then we discard
		the minus in position $\delta$ in the sign expansion of $a_i$.
		\item If $i>0$ is a non-limit ordinal and $(a_{i-1})_-$ (as a sign expansion)
		is a prefix of $a_i$, then we discard this minus after $a_{i-1}$ if $r_{i-1}$
		is not a dyadic rational number. 
	\end{itemize}
\end{definition}
More informally, $a_i^\circ$ is the sign expansion obtained when copying $a_i$ omitting 
the minuses that have already been treated before, in an other exponent of the serie. 
We just keep the new one brought by $a_i$. However, the later case give a condition where
even a new minus can be omitted.

\begin{theorem}[\cite{gonshor1986introduction}, Theorems 5.11 and 5.12]
	\label{thm:serieToSignExp}
	For $\alpha$ an ordinal and a surreal $a$, we write $|a[:\alpha]|_+$ for the (ordinal) number of pluses in $\alpha[:\alpha]$ the prefix of length of $\alpha$ of $x$. Then,
	\begin{itemize}
		\item The sign expansion of $\omega^a$ is as follows: we start with a plus and the for any ordinal $\alpha<|a|$ we add $\omega^{|a[:\alpha]|_++1}$ occurrences of $a(\alpha)$ (the sign in position $\alpha$ in the signs sequence of $a$).
		\item The sign expansion of $\omega^an$ is the signs sequence of $\omega^a$ followed by $\omega^{|a|_+}(n-1)$ pluses.
		\item The sign expansion of $\omega^a\f1{2^n}$ is the sign expansion of $\omega^a$ followed by $\omega^{|a|_+}n$ minuses.
		\item The sign expansion of $\omega^ar$ for $r$ a positive real is the sign expansion of $\omega^a$ to which we add each sign of $r$ $\omega^{|a|_+}$ times excepted the first plus which is omitted. 
		\item The sign expansion of $\omega^ar$ for $r$ a negative real is the sign expansion of $\omega^a(-r)$ in which we change every plus in a minus and conversely.
		\item The sign expansion of $\Sum{i<\nu}{}r_i\omega^{a_i}$ is the juxtaposition of the sign expansions of the $\omega^{a_i^\circ}r_i$
	\end{itemize}
\end{theorem}

As a final note of this subsection, we give some bounds on the length of monomials and terms.

\begin{lemma}[{\cite[Lemma 4.1]{DriesEhrlich01}}]
	\label{lem:lengthOmegaA}
	For all surreal number $a\in\Nobf$, $$\length a\leq \length{\omega^a}\leq\omega^{\length a}$$
\end{lemma}

\begin{lemma}[{\cite[Lemma 6.3]{gonshor1986introduction}}]
	\label{lem:lengthTerm}
	Let $x=\aSurreal$ a surreal number. We have for all $i<\nu$, $\length{r_i\omega^{a_i}}\leq\length x$.
\end{lemma}

\subsubsection{Hahn series and surreal numbers}
As a consequence of Theorems \ref{thm:normalForm} and \ref{thm:normalFormOp}, the field $\No$ in in fact a Hahn serie field. More precisely,

\begin{corollary}
	The fields $\No$ and $\Rbb((t^{\No}))$ are isomorphic.
\end{corollary}

\begin{proof}
	Sending $t^a$ to $\omega^{-a}$ for all surreal number $a$, we notice that all the definitions match to each other.
\end{proof}

Notice that we have of course $\Nobf= \HahnFieldOrd{\Rbb}{\Nobf}{\Ord}$.
