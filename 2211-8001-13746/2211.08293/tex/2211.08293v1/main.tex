%
%\RequirePackage{fix-cm}
\RequirePackage{amsmath}
 
%
\documentclass[twocolumn]{svjour3}          % twocolumn
%
\smartqed  % flush right qed marks, e.g. at end of proof
%
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[switch]{lineno}
\usepackage{array}
\usepackage{multirow}
\renewcommand{\arraystretch}{1.2}
%
% \usepackage{mathptmx}      % use Times fonts if available on your TeX system
%
% insert here the call for the packages your document requires
%\usepackage{latexsym}
% etc.
%
% please place your own definitions here and don't use \def but
% \newcommand{}{}
%
% Insert the name of "your journal" with
\journalname{Computing and Software for Big Science}
%
\begin{document}

% \linenumbers

\title{The ATLAS EventIndex}
\subtitle{A BigData catalogue for all ATLAS experiment events$^+$}

\author{Dario Barberis$^{1*}$      \and
        Igor Aleksandrov$^2$       \and
        Evgeny Alexandrov$^2$      \and \\
        Zbigniew Baranowski$^3$    \and
        Luca Canali$^3$            \and 
        Elizaveta Cherepanova$^4$  \and \\
        Gancho Dimitrov$^3$        \and
        Andrea Favareto$^1$        \and
        \'Alvaro Fern\'andez Casan\'i$^5$ \and
        Elizabeth J. Gallas$^6$     \and
        Carlos Garc\'ia Montoro$^5$ \and \\
        Santiago Gonz\'alez de la Hoz$^5$ \and 
        Julius H\v{r}ivn\'{a}\v{c}$^7$  \and
        Alexander Iakovlev$^2$     \and
        Andrei Kazymov$^2$         \and
        Mikhail Mineev$^2$         \and 
        Fedor Prokoshin$^2$        \and \\
        Grigori Rybkin$^7$         \and
        Jos\'e Salt$^5$            \and
        Javier S\'anchez$^5$       \and
        Roman Sorokoletov$^8$      \and
        Rainer T\"obbicke$^3$      \and 
        Petya Vasileva$^3$         \and 
        Miguel Villaplana Perez$^5$ \and \\
        Ruijun Yuan$^7$
}


\institute{$^1$
              Dipartimento di Fisica dell'Universit\`a di Genova and INFN Sezione di Genova, Via Dodecaneso 33, 16146 Genova (Italy) \\
           $^2$
              Joint Institute for Nuclear Research, Joliot-Curie 6, 141980 Dubna (Russia) \\
           $^3$
              CERN, CH-1211 Geneva 23 (Switzerland) \\ 
           $^4$
              Nikhef,
              Science Park 105,
              1098 XG Amsterdam (Netherlands) \\
           $^5$
              Instituto de F\'isica Corpuscular IFIC, Centro mixto Universitat de Valencia - CSIC, C/Catedr\'atico Jos\'e Beltr\'an 2, 46980 Paterna, Valencia (Spain) \\
           $^6$
              University of Oxford, Denys Wilkinson Bldg, Keble Rd, Oxford OX1 3RH (United Kingdom) \\
           $^7$
              IJCLab, CNRS / Universit\'e Paris-Saclay / Universit\'e de Paris, 91405 Orsay (France) \\
           $^8$
              University of Texas at Arlington, 701 South Nedderman Drive, Arlington, TX 76019 (USA) \\
           $^*$ Corresponding author; e-mail Dario.Barberis@cern.ch \\
           $^+$ This paper is based on work performed before 24 February 2022.
}

\date{Received: date / Accepted: date}
% The correct dates will be entered by the editor


\maketitle

\begin{abstract}
The ATLAS EventIndex system comprises the catalogue of all events collected, processed or generated by the ATLAS experiment at the CERN LHC accelerator, and all associated software tools to collect, store and query this information. ATLAS records several billion particle interactions every year of operation, processes them for analysis and generates even larger simulated data samples; a global catalogue is needed to keep track of the location of each event record and be able to search and retrieve specific events for in-depth investigations. Each EventIndex record includes summary information on the event itself and the pointers to the files containing the full event. Most components of the EventIndex system are implemented using BigData open-source tools. This paper describes the architectural choices and their evolution in time, as well as the past, current and foreseen future implementations of all EventIndex components. 
\keywords{ATLAS Experiment \and Event Catalogue \and BigData Catalogue \and Hadoop \and HBase}
\end{abstract}

\input{1_Introduction}
\input{2_Architecture}
\input{3_DataProduction}
\input{4_DataCollection}
\input{5_Store_Hadoop}
\input{6_Store_Oracle}
\input{7_Monitoring}
\input{8_Operations}
\input{9_Evolution}
\input{A_Conclusions}


\begin{acknowledgements}
This work was done as part of the distributed computing and databases applications research and development programme of the ATLAS Collaboration, and we thank the collaboration for its support and cooperation. Part of this work was funded through PRIN Project “STOA-LHC 20108T4XTM”, CUP: I11J12000080001, of the Italian Ministry of Education, University and Research (MIUR).
In Spain MICINN partially supported this work under grants FPA2016-75141-C2-1-R and PID2019-104301RB-C21, which include FEDER funds from the European Union.
\end{acknowledgements}

\section*{Conflict of interest}
The authors declare that they have no conflict of interest.


% BibTeX users please use one of
%\bibliographystyle{spbasic}      % basic style, author-year citations
%\bibliographystyle{spmpsci}      % mathematics and physical sciences
%\bibliographystyle{spphys}       % APS-like style for physics
%\bibliography{biblio}   % name your BibTeX data base

% Non-BibTeX users please use
\begin{thebibliography}{}
%
% and use \bibitem to create references. Consult the Instructions
% for authors for reference list style.
%
\bibitem{ATLAS}
ATLAS Collaboration (2008) The ATLAS experiment at the CERN Large Hadron Collider. \textit{JINST} \textbf{3} S08003. DOI:\href{https://doi.org/10.1088/1748-0221/3/08/S08003}{10.1088/1748-0221/3/08/S08003}

\bibitem{LHC}
Evans L, Bryant P (2008) LHC machine. \textit{JINST} \textbf{3} S08001. DOI:\href{https://doi.org/10.1088/1748-0221/3/08/S08001}{10.1088/1748-0221/3/08/S08001}

\bibitem{Trig}
ATLAS Collaboration (2020) Operation of the ATLAS trigger system in Run 2. \textit{JINST} \textbf{15} P10004. DOI:\href{https://doi.org/10.1088/1748-0221/15/10/P10004}{10.1088/1748-0221/15/10/P10004}

\bibitem{WLCG}
LHC Computing Grid: Technical Design Report. Document LCG-TDR-001, CERN-LHCC-2005-024.  20 June 2005. ISBN 978-92-9083-253-9.

\bibitem{Guid}
GUID: \href{http://guid.one}{http://guid.one}

\bibitem{Rucio}
Barisits M, Beermann T, Berghaus F \textit{et al.} (2019) Rucio: Scientific Data Management. \textit{Comput. Softw. Big. Sci.} \textbf{3} 11. DOI:\href{https://doi.org/10.1007/s41781-019-0026-3}{10.1007/s41781-019-0026-3}

\bibitem{TagDB}
Malon D \textit{et al.} (2012) An extensible infrastructure for querying and mining event-level metadata in ATLAS. \textit{J. Phys.: Conf. Ser.} \textbf{396} 052053. DOI:\href{https://doi.org/10.1088/1742-6596/396/5/052053}{10.1088/1742-6596/396/5/052053}

\bibitem{Oracle}
Oracle: \href{https://www.oracle.com}{https://www.oracle.com}

\bibitem{MetaCHEP2013}
Barberis D \textit{et al.} (2014) The future of event-level information repositories, indexing, and selection in ATLAS. \textit{J. Phys.: Conf. Ser.} \textbf{513} 042009. DOI:\href{https://doi.org/10.1088/1742-6596/513/4/042009}{10.1088/1742-6596/513/4/042009}

\bibitem{EICHEP2013}
Barberis D \textit{et al.} (2014) The ATLAS Eventindex: an event catalogue for experiments collecting large amounts of data. \textit{J. Phys.: Conf. Ser.} \textbf{513} 042002. DOI:\href{https://doi.org/10.1088/1742-6596/513/4/042002}{10.1088/1742-6596/513/4/042002}

\bibitem{Hadoop}
Hadoop: \href{https://hadoop.apache.org}{https://hadoop.apache.org}

\bibitem{HBase}
HBase: \href{https://hbase.apache.org}{https://hbase.apache.org}

\bibitem{EventDisplay}
ATLAS Event Displays: \href{https://twiki.cern.ch/twiki/bin/view/AtlasPublic/EventDisplayRun2Collisions}{https://twiki.cern.ch/twiki/ bin/view/AtlasPublic/EventDisplayRun2Collisions}

\bibitem{EPS}
Alexandrov E \textit{et al.}, (2021) Development of the ATLAS Event picking server. \textit{Proc. 9th Int. Conf. "Distributed Computing and Grid Technologies in Science and Education" (GRID'2021), Dubna (Russia)}. DOI:\href{https://doi.org/10.54546/MLIT.2021.35.43.001}{10.54546/MLIT.2021.35.43.001}

\bibitem{Tier0}
Elsing M \textit{et al.} (2010) The ATLAS Tier-0: Overview and operational experience. \textit{J. Phys.: Conf. Ser.} \textbf{219} 072011. DOI:\href{https://doi.org/10.1088/1742-6596/219/7/072011}{10.1088/1742-6596/219/7/072011}

\bibitem{AMI}
Fulachier J \textit{et al.} (2017) ATLAS Metadata Interface (AMI), a generic metadata framework. \textit{J. Phys. Conf. Ser.} \textbf{898} 062001. DOI:\href{https://doi.org/10.1088/1742-6596/898/6/062001}{10.1088/1742-6596/898/6/062001}

\bibitem{PanDA}
Barreiro Megino F H \textit{et al.} (2017) PanDA for ATLAS distributed computing in the next decade. \textit{J. Phys. Conf. Ser.} \textbf{898} 052002. DOI:\href{https://doi.org/10.1088/1742-6596/898/5/052002}{10.1088/1742-6596/898/5/052002}

\bibitem{JobTransforms} 
Stewart G A\textit{et al.} (2014) ATLAS Job Transforms: A Data Driven Workflow Engine. \textit{J. Phys.: Conf. Ser.} \textbf{513} 032094. DOI:\href{https://doi.org/10.1088/1742-6596/513/3/032094}{https://doi.org/10.1088/1742-6596/513/3/032094}

\bibitem{Athena}
Stewart G A \textit{et al.} (2016) Multi-threaded software framework development for the ATLAS experiment. \textit{J. Phys.: Conf. Ser.} \textbf{762} 012024. DOI:\href{https://doi.org/10.1088/1742-6596/762/1/012024}{10.1088/1742-6596/762/1/012024}

\bibitem{POOL}
Duellmann D (2003) The LCG POOL project: General overview and project structure. \textit{Proc. Computing in High Energy and Nuclear Physics (CHEP03), La Jolla, Ca, USA} arXiv:\href{https://arxiv.org/abs/physics/0306129}{https://arxiv.org/abs/physics/0306129}

\bibitem{ROOT}
Brun R and Rademakers F (1997) ROOT — An object oriented data analysis framework. \textit{Nucl. Inst. \& Meth. in Phys. Res. A} \textbf{389} 81–86. DOI:\href{https://doi.org/10.1016/S0168-9002(97)00048-X}{https://doi.org/10.1016/S0168-9002(97)00048-X}

\bibitem{OldMon}
Fernández Casaní A \textit{et al.} (2017) ATLAS EventIndex general dataflow and monitoring infrastructure. \textit{J. Phys.: Conf. Ser.} \textbf{898} 062010. DOI:\href{https://doi.org/10.1088/1742-6596/898/6/062010}{10.1088/1742-6596/898/6/062010}

\bibitem{ActiveMQ}
ActiveMQ: \href{http://activemq.apache.org}{http://activemq.apache.org}

\bibitem{STOMP}
STOMP: \href{https://stomp.github.io}{https://stomp.github.io}

\bibitem{OSEI}
Fernández Casaní A \textit{et al.} (2021) A Reliable Large Distributed Object Store Based Platform for Collecting Event Metadata. \textit{J. Grid Comp.} \textbf{19} 39. DOI:\href{https://doi.org/10.1007/s10723-021-09580-0}{10.1007/s10723-021-09580-0}

\bibitem{ObjectStore}
Mesnier M, Ganger G R and Riedel E 2003 \textit{IEEE Communications Magazine} \textbf{41} 84–90 ISSN 0163-6804

\bibitem{EOS}
EOS: \href{https://eos-docs.web.cern.ch}{https://eos-docs.web.cern.ch}

\bibitem{XRDCP}
Xrdcp: \href{https://xrootd.slac.stanford.edu}{https://xrootd.slac.stanford.edu}

\bibitem{Sqlite3}
SQLite3: \href{http://www.sqlite.org/sqlite.html}{http://www.sqlite.org/sqlite.html}

\bibitem{ProtocolBuffers}
Google Protocol Buffers (Google’s Data Interchange Format): \href{http://code.google.com/apis/protocolbuffers}{http://code.google.com/apis/protocolbuffers}

\bibitem{Gzip}
Gzip: \href{https://www.gzip.org}{https://www.gzip.org}

\bibitem{conTZole}
Ueda I \textit{et al.} (2011) ATLAS Operations: Experience and Evolution in the Data Taking Era. \textit{J. Phys.: Conf. Ser.} \textbf{331} 072034. DOI:\href{https://doi.org/10.1088/1742-6596/331/7/072034}{10.1088/1742-6596/331/7/072034}

\bibitem{PanDAMon}
PanDA Monitoring: \href{https://bigpanda.cern.ch}{https://bigpanda.cern.ch} 

\bibitem{AFS}
AFS (Andrew File System, the distributed file system used at CERN): \href{https://www.openafs.org}{https://www.openafs.org}

\bibitem{Future}
Future pattern: \href{https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html}{https://docs.oracle.com/javase/7/docs/ api/java/util/concurrent/Future.html}

\bibitem{Kudu}
Kudu: \href{https://kudu.apache.org}{https://kudu.apache.org}

\bibitem{Phoenix}
Phoenix: \href{https://phoenix.apache.org}{https://phoenix.apache.org}

\bibitem{MapFile}
Hadoop MapFile: \href{https://hadoop.apache.org/docs/r2.6.2/api/org/apache/hadoop/io/MapFile.html}{https://hadoop.apache.org/docs/ r2.6.2/api/org/apache/hadoop/io/MapFile.html}

\bibitem{SequenceFile}
Hadoop SequenceFile: \href{https://hadoop.apache.org/docs/r2.6.2/api/org/apache/hadoop/io/SequenceFile.html}{https://hadoop.apache.org/docs/ r2.6.2/api/org/apache/hadoop/io/SequenceFile.html}

\bibitem{COMA}
Gallas E J \textit{et al.}, (2014) Utility of collecting metadata to manage a large scale conditions database in ATLAS. \textit{J. Phys. Conf. Ser.} \textbf{513} 042020. DOI:\href{https://doi.org/10.1088/1742-6596/513/4/042020}{10.1088/1742-6596/513/4/042020}


\bibitem{TrigInfo}
Mineev M, Prokoshin F and Yakovlev A, (2018) Trigger information data flow for the ATLAS EventIndex. \textit{Proceedings of the VIII International Conference "Distributed Computing and Grid-technologies in Science and Education" (GRID 2018), Dubna (Russia)},
\href{http://ceur-ws.org/Vol-2267/104-107-paper-18.pdf}{http://ceur-ws.org/Vol-2267/104-107-paper-18.pdf}

\bibitem{CVMFS}
CVMFS: \href{https://cernvm.cern.ch/fs}{https://cernvm.cern.ch/fs}

\bibitem{Tomcat}
Tomcat: \href{https://tomcat.apache.org}{https://tomcat.apache.org}

\bibitem{REST}
REST: \href{https://restfulapi.net}{https://restfulapi.net}

\bibitem{AL2}
Apache License 2.0: \href{http://www.apache.org/licenses/LICENSE-2.0}{http://www.apache.org/licenses/ LICENSE-2.0}

\bibitem{FSDEF}
Free Software Definition: \href{https://www.gnu.org/philosophy/free-sw.html}{https://www.gnu.org/ philosophy/free-sw.html}

\bibitem{EIOra}
Gallas E J \textit{et al.}, (2017) An Oracle-based event index for ATLAS. \textit{J. Phys. Conf. Ser.} \textbf{898} 042033. DOI:\href{https://doi.org/10.1088/1742-6596/898/4/042033}{10.1088/1742-6596/898/4/042033}

\bibitem{derivation}
Catmore J \textit{et al.}, (2015) A New Petabyte-scale Data Derivation Framework for ATLAS. \textit{J. Phys. Conf. Ser.} \textbf{664} 072007. DOI:\href{https://doi.org/10.1088/1742-6596/664/7/072007}{10.1088/1742-6596/664/7/072007}

\bibitem{Kibana}
Kibana: \href{https://www.elastic.co/products/kibana}{https://www.elastic.co/products/kibana}

\bibitem{IDB}
InfluxDB: \href{https://www.influxdata.com}{https://www.influxdata.com}

\bibitem{Grafana}
Grafana: \href{https://grafana.com}{https://grafana.com}

\bibitem{NewMon}
Alexandrov E \textit{et al.} (2018) BigData Tools for the Monitoring of the ATLAS EventIndex. \textit{Proc. VIII Int. Conf. "Distributed Computing and Grid-technologies in Science and Education" (GRID'2018), Dubna (Russia)}, \href{http://ceur-ws.org/Vol-2267/91-94-paper-15.pdf}{http://ceur-ws.org/Vol-2267/91-94-paper-15.pdf}

\bibitem{EIopt}
Baranowski Z \textit{et al.}, (2017) A study of data representation in Hadoop to optimize data storage and search performance for the ATLAS EventIndex. \textit{J. Phys. Conf. Ser.} \textbf{898} 062020. DOI:\href{https://doi.org/10.1088/1742-6596/898/6/062020}{10.1088/1742-6596/898/6/062020}

\bibitem{EIKudu}
Baranowski Z \textit{et al.}, (2019) A prototype for the evolution of ATLAS EventIndex based on Apache Kudu storage. \textit{EPJ Web Conf.} \textbf{214} 04057. DOI:\href{https://doi.org/10.1051/epjconf/201921404057}{10.1051/epjconf/201921404057}

\bibitem{EIHB}
Cherepanova E \textit{et al.}, (2021) The ATLAS EventIndex using the HBase/Phoenix storage solution. \textit{Proc. 9th Int. Conf. "Distributed Computing and Grid Technologies in Science and Education" (GRID'2021), Dubna (Russia)}. DOI:\href{https://doi.org/10.54546/MLIT.2021.68.25.001}{10.54546/MLIT.2021.68.25.001}

\bibitem{stomp}
A Python client library for accessing messaging servers using the STOMP protocol:  \href{https://github.com/jasonrbriggs/stomp.py}{https://github.com/jasonrbriggs/stomp.py}

\bibitem{boto}
An Amazon Web Services (AWS) Software Development Kit (SDK) for Python:  \href{https://github.com/boto/boto3}{https://github.com/boto/boto3}

\bibitem{Spark}
Zaharia M \textit{et al.}, (2016) Apache Spark: a unified engine for big data processing. \textit{Commun. ACM} \textbf{59}, 11, 56–65. DOI:\href{https://doi.org/10.1145/2934664}{https://doi.org/10.1145/2934664}

\bibitem{Gremlin}
Gremlin: \href{https://tinkerpop.apache.org/gremlin.html}{https://tinkerpop.apache.org/gremlin.html}



\end{thebibliography}

\end{document}

