% \newpage

% \onecolumn
\ifarxiv
\appendix
\section{Appendix}
\else
\section{Supporting Information}
\fi

\maketitle

We run \rapattack~with $K=100$ in all experiments. In our attack, each run of \rap~ sets $N'=1000$ and optimizes over query answers using ADAM with a learning rate of $0.1$. In Census experiments in which \rapattack is initialized to the baseline, $N'$ is instead the size of the $D_{holdout}$. In total, the number parameters of our attack is $K \times N' \times d$, where $d$ is the dimension size of the data domain.

In Table \ref{tab:folktable_columns}, we describe the columns used for each Folktables task found in our ACS experiments. 

\input{tables/folktables_columns.tex}

In Section \ref{sec:results}, we visualized the reconstruction rates on Census and ACS datasets. However, to more easily communicate our findings, we presented results that were averaged across various geographic entities in Figures \ref{fig-main:census_avg_tract}, \ref{fig-main:census_avg_tract_init}, and \ref{fig-main:census_avg_block} for Census experiments and Figure \ref{fig-main:folktables_avg} for ACS experiments. Here, we now present more granular results. In particular, in each subplot of Figures \ref{fig-appx:census_tract_all1}, \ref{fig-appx:census_tract_all2}, \ref{fig-appx:census_tract_ib_all1}, and \ref{fig-appx:census_tract_ib_all2}, we present results for a single tract that was randomly chosen from each state, where the latter two figures (\ref{fig-appx:census_tract_ib_all1}, \ref{fig-appx:census_tract_ib_all2}) present tract-level experiments without the BLOCK feature. In addition, we plot results of \rapattack~initialized to the baseline distribution in Figures \ref{fig-appx:census_tract_all_init1} and \ref{fig-appx:census_tract_all_init2}. Like in Section \ref{sec:results}, we again average results at the block-level in Figures \ref{fig-appx:census_block_all1} and \ref{fig-appx:census_block_all2}, but now we aggregate our randomly selected blocks at the state-level. Finally, in \ref{fig-appx:folktables_all}, we present results for each of the 15 state-task combinations derived from the ACS Folktables package.

Finally, in Figure \ref{fig-appx:ppmf_by_size}, we again plot the match rates of \rapattack~and our block-level baseline. However, to demonstrate how the performance of the two methods depends on the size of the dataset $N$, we instead group the blocks by their size. We observe that \rapattack~performs worse as $N$ increases, but conversely, the baseline performs slightly better. We attribute this phenomenon to the fact that the size of $D_{block}$ also increases with $N$, making it more likely that some element of $D_{block}$ exists in the private dataset $D$. Moreover, given that the overall data domain size of the census data is relatively small (when compared to a dataset like the ACS), the effect on the performance of our artificial baseline is immediately apparent when observing the subplots in the first row of Figure \ref{fig-appx:ppmf_by_size} where $N \le 300$

\begin{figure*}[hb]
    \centering
    \includegraphics[width=\textwidth]{images/census/tract/all1.png}
    \caption{We plot \matchrate~of \rapattack~and our baselines on a \emph{tract}-level reconstruction with the BLOCK attribute \emph{included}. Subplots are labeled and ordered alphabetically by the state name.}
    \label{fig-appx:census_tract_all1}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/tract/all2.png}
    \caption{We plot \matchrate~of \rapattack~and our baselines on a \emph{tract}-level reconstruction with the BLOCK attribute \emph{included}. Subplots are labeled and ordered alphabetically by the state name.}
    \label{fig-appx:census_tract_all2}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/tract/all_init1.png}
    \caption{We plot \matchrate~of \rapattack~and our tract-level baseline on a \emph{tract}-level reconstruction with the BLOCK attribute \emph{included}. \rapattack~is initialized to the baseline. Subplots are labeled and ordered alphabetically by the state name.
    The sharp drops in the baseline match rates are explained by an anomaly in the raw PPMF microdata discussed in
    Section~\ref{sec:PPMF}, which is that in histograms
    of the number of unique rows with frequency $f$ in the overall tract, there is often a sharp spike at $f = 5$. Note that the probability
    that all $f$ copies of such a row fall into the baseline split is $1/2^f$, and that if this happens it will result in
    a non-match. For example, in the tract for AZ, there are 389 unique rows with $f = 5$ pre-split, while the counts for $f= 4$ and $f=6$ are
    88 and 27 respectively. The combination of this spike at $f=5$ and the fact that $1/32$ is relatively large results in many tracts
    having the observed dips in match rates. 
    }
    \label{fig-appx:census_tract_all_init1}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/tract/all_init2.png}
    \caption{We plot \matchrate~of \rapattack~and our tract-level baseline on a \emph{tract}-level reconstruction with the BLOCK attribute \emph{included}. \rapattack~is initialized to the baseline. Subplots are labeled and ordered alphabetically by the state name.
    The sharp drops in the baseline match rates are explained by an anomaly in the raw PPMF microdata discussed in
    Section~\ref{sec:PPMF}, which is that in histograms
    of the number of unique rows with frequency $f$ in the overall tract, there is often a sharp spike at $f = 5$. Note that the probability
    that all $f$ copies of such a row fall into the baseline split is $1/2^f$, and that if this happens it will result in
    a non-match. For example, in the tract for AZ, there are 389 unique rows with $f = 5$ pre-split, while the counts for $f= 4$ and $f=6$ are
    88 and 27 respectively. The combination of this spike at $f=5$ and the fact that $1/32$ is relatively large results in many tracts
    having the observed dips in match rates. 
    }
    \label{fig-appx:census_tract_all_init2}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/tract_ib/all1.png}
    \caption{We plot \matchrate~of \rapattack~and our baselines on a \emph{tract}-level reconstruction with the BLOCK attribute \emph{excluded}. Subplots are labeled and ordered alphabetically by the state name.
    }
    \label{fig-appx:census_tract_ib_all1}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/tract_ib/all2.png}
    \caption{We plot \matchrate~of \rapattack~and our baselines on a \emph{tract}-level reconstruction with the BLOCK attribute \emph{excluded}. Subplots are labeled and ordered alphabetically by the state name.}
    \label{fig-appx:census_tract_ib_all2}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/block/all1.png}
    \caption{We plot \matchrate~of \rapattack~and our baselines on a \emph{block}-level reconstruction, where in each subplot, we average results across all blocks selected for the corresponding state. Subplots are labeled and ordered alphabetically by the state name. Since each subplot plots results average across many blocks, we do not add the value of $u$ to each subtitle.}
    \label{fig-appx:census_block_all1}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/block/all2.png}
    \caption{We plot \matchrate~of \rapattack~and our baselines on a \emph{block}-level reconstruction, where in each subplot, we average results across all blocks selected for the corresponding state. Subplots are labeled and ordered alphabetically by the state name. Since each subplot plots results average across many blocks, we do not add the value of $u$ to each subtitle.}
    \label{fig-appx:census_block_all2}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/block/all_init1.png}
    \caption{We plot \matchrate~of \rapattack~and our block-level baseline on \emph{block}-level reconstruction, where in each subplot, we average results across all blocks selected for the corresponding state. \rapattack~is initialized to the baseline. Subplots are labeled and ordered alphabetically by the state name. Since each subplot plots results average across many blocks, we do not add the value of $u$ to each subtitle.}
    \label{fig-appx:census_block_all_init1}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/block/all_init2.png}
    \caption{We plot \matchrate~of \rapattack~and our block-level baseline on \emph{block}-level reconstruction, where in each subplot, we average results across all blocks selected for the corresponding state. \rapattack~is initialized to the baseline. Subplots are labeled and ordered alphabetically by the state name. Since each subplot plots results average across many blocks, we do not add the value of $u$ to each subtitle.}
    \label{fig-appx:census_block_all_init2}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/folktables/all.png}
    \caption{We plot \matchrate~of \rapattack~and our baselines on a state-level reconstruction for each state-task combination from the ACS Folktables package. We show results of \rapattack using both 2 and 3-way marginal queries.}
    \label{fig-appx:folktables_all}
\end{figure*}

\begin{figure*}
    \centering
    \includegraphics[width=\textwidth]{images/census/block/by_size.png}
    \caption{We plot \matchrate~of \rapattack~(initialized to the baseline) and our block-level baseline on \emph{block}-level reconstruction. We arrange the blocks into 10 subplots, ordered by size $N$ (e.g., the first subplot plots the average over the 30 smallest blocks). The title of each subplot shows the range of size $N$ for each group of blocks.}
    \label{fig-appx:ppmf_by_size}
\end{figure*}

% \begin{figure*}[htbp]
%     \centering
%     \includegraphics[width=\textwidth]{images/census/averaged.png}
%     \caption{TODO}
%     \label{fig-main:census_avg}
% \end{figure*}

% \begin{figure*}[htbp]
%     \centering
%     \includegraphics[width=\textwidth]{images/census/averaged_init.png}
%     \caption{TODO, also still waiting on block results for RAP init}
%     \label{fig-main:census_avg_init}
% \end{figure*}