\begin{tikzpicture}[scale=1,solid,black,
	declare function={
		hp(\x)= 2-2*sin(20*\x);	
		hq(\x)= 2*sin(20*\x);
		dev(\x) =  and(\x>1,\x<3)*min(hp(\x),.4*(sin(180*(\x-1.5))+1));
		zero(\x) = 0;		
	}]
	\node at(0,1.5){	
		\begin{tikzpicture}[scale=1,solid,black]
		% Note: The nested tikzpictures are (apparently) needed for fill between to work
		%		Without it or when using scopes, the filling does not work or even produces errors...
		\begin{axis}[xmin=0,xmax=4.5,ymax=3, ymin=0, samples=500,width=6.5cm,height=4cm,
			axis x line*=bottom, axis y line*=left, axis lines=middle, xtick={1,2,3},xticklabels={$[$,\small$\supp(\shiftN)$,$]$},ytick=\empty]
			\addplot[blue, ultra thick,domain=0:5] {hp(x)} node[above,pos=.2]{$h_p$};
			
			\addplot[red,dashed,thick,name path=F,domain=0:5] {dev(x)}  node[above=.1cm,pos=.25]{$\shiftN$};
			\addplot[name path=G] {zero(\x)};
			
			\addplot[pattern=north east lines, pattern color=red, thick]fill between[of=F and G];
		\end{axis}
		\end{tikzpicture}
	};
		
	\node at(0,-1.8){	
		\begin{tikzpicture}[scale=1,solid,black]
		\begin{axis}[xmin=0,xmax=4.5,ymax=3, ymin=0, samples=500,width=6.5cm,height=4cm,
			axis x line*=bottom, axis y line*=left, axis lines=middle, xtick={2,3,4},xticklabels={$[$,\small$\supp(\shiftN)+\Delta$,$]$},ytick=\empty]
			\addplot[blue, ultra thick,domain=0:5] {hq(x)} node[above,pos=.2]{$h_q$};
		\end{axis}
		\end{tikzpicture}
	};

	\node at(10,1.5) {
		\begin{tikzpicture}[scale=1,solid,black]
		\begin{axis}[xmin=0,xmax=4.5,ymax=3, ymin=0, samples=500,width=6.5cm,height=4cm,
			axis x line*=bottom, axis y line*=left, axis lines=middle, xtick={1,2,3},xticklabels={$[$,\small$\supp(\shiftN)$,$]$},ytick=\empty]
			\addplot[blue, ultra thick,domain=0:5] {hp(x)-dev(x)} node[above,pos=.2]{$h'_p$};
		\end{axis}
		\end{tikzpicture}
	};

	\node at(10,-1.8){
		\begin{tikzpicture}[scale=1,solid,black]
		\begin{axis}[xmin=0,xmax=4.5,ymax=3, ymin=0, samples=500,width=6.5cm,height=4cm,
			axis x line*=bottom, axis y line*=left, axis lines=middle, xtick={2,3,4},xticklabels={$[$,\small$\supp(\shiftN)+\Delta$,$]$},ytick=\empty]
			\addplot[blue, ultra thick,domain=0:5,name path=Gq] {hq(x)+dev(x-1)} node[above,pos=.2]{$h'_q$};
			
			\addplot[domain=2:4,red,dashed,thick,name path=Fq] {hq(x)};
			
			\addplot[domain=2:4,pattern=north east lines, pattern color=red, thick]fill between[of=Fq and Gq];
		\end{axis}
		\end{tikzpicture}
	};
	
	\draw[->,ultra thick] (3.5,0) -- node[above]{\epsDev} node[below]{$(q,\shiftN,\Delta) \in A_p(h)$} +(3,0);
\end{tikzpicture}